/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/js/objects/LightningStorm.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
console.warn("THREE.LightningStorm: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),THREE.LightningStorm=function(i){THREE.Object3D.call(this),i=i||{},this.stormParams=i,i.size=void 0!==i.size?i.size:1e3,i.minHeight=void 0!==i.minHeight?i.minHeight:80,i.maxHeight=void 0!==i.maxHeight?i.maxHeight:100,i.maxSlope=void 0!==i.maxSlope?i.maxSlope:1.1,i.maxLightnings=void 0!==i.maxLightnings?i.maxLightnings:3,i.lightningMinPeriod=void 0!==i.lightningMinPeriod?i.lightningMinPeriod:3,i.lightningMaxPeriod=void 0!==i.lightningMaxPeriod?i.lightningMaxPeriod:7,i.lightningMinDuration=void 0!==i.lightningMinDuration?i.lightningMinDuration:1,i.lightningMaxDuration=void 0!==i.lightningMaxDuration?i.lightningMaxDuration:2.5,this.lightningParameters=THREE.LightningStrike.copyParameters(i.lightningParameters,i.lightningParameters),this.lightningParameters.isEternal=!1,this.lightningMaterial=void 0!==i.lightningMaterial?i.lightningMaterial:new THREE.MeshBasicMaterial({color:11599871}),void 0!==i.onRayPosition?this.onRayPosition=i.onRayPosition:this.onRayPosition=function(t,n){n.set((Math.random()-.5)*i.size,0,(Math.random()-.5)*i.size);var s=THREE.MathUtils.lerp(i.minHeight,i.maxHeight,Math.random());t.set(i.maxSlope*(2*Math.random()-1),1,i.maxSlope*(2*Math.random()-1)).multiplyScalar(s).add(n)},this.onLightningDown=i.onLightningDown,this.inited=!1,this.nextLightningTime=0,this.lightningsMeshes=[],this.deadLightningsMeshes=[];for(var t=0;t<this.stormParams.maxLightnings;t++){var n=new THREE.LightningStrike(THREE.LightningStrike.copyParameters({},this.lightningParameters)),s=new THREE.Mesh(n,this.lightningMaterial);this.deadLightningsMeshes.push(s)}},THREE.LightningStorm.prototype=Object.create(THREE.Object3D.prototype),THREE.LightningStorm.prototype.constructor=THREE.LightningStorm,THREE.LightningStorm.prototype.isLightningStorm=!0,THREE.LightningStorm.prototype.update=function(i){if(this.inited||(this.nextLightningTime=this.getNextLightningTime(i)*Math.random(),this.inited=!0),i>=this.nextLightningTime){var t=this.deadLightningsMeshes.pop();if(t){var n=THREE.LightningStrike.copyParameters(t.geometry.rayParameters,this.lightningParameters);n.birthTime=i,n.deathTime=i+THREE.MathUtils.lerp(this.stormParams.lightningMinDuration,this.stormParams.lightningMaxDuration,Math.random()),this.onRayPosition(n.sourceOffset,n.destOffset),n.noiseSeed=Math.random(),this.add(t),this.lightningsMeshes.push(t)}this.nextLightningTime=this.getNextLightningTime(i)}for(var s=0,e=this.lightningsMeshes.length;s<e;){var a=this.lightningsMeshes[s],g=a.geometry,r=g.state;g.update(i),r===THREE.LightningStrike.RAY_PROPAGATING&&g.state>r&&this.onLightningDown&&this.onLightningDown(g),g.state===THREE.LightningStrike.RAY_EXTINGUISHED?(this.lightningsMeshes.splice(this.lightningsMeshes.indexOf(a),1),this.deadLightningsMeshes.push(a),this.remove(a),e--):s++}},THREE.LightningStorm.prototype.getNextLightningTime=function(i){return i+THREE.MathUtils.lerp(this.stormParams.lightningMinPeriod,this.stormParams.lightningMaxPeriod,Math.random())/(this.stormParams.maxLightnings+1)},THREE.LightningStorm.prototype.copy=function(i){return THREE.Object3D.prototype.copy.call(this,i),this.stormParams.size=i.stormParams.size,this.stormParams.minHeight=i.stormParams.minHeight,this.stormParams.maxHeight=i.stormParams.maxHeight,this.stormParams.maxSlope=i.stormParams.maxSlope,this.stormParams.maxLightnings=i.stormParams.maxLightnings,this.stormParams.lightningMinPeriod=i.stormParams.lightningMinPeriod,this.stormParams.lightningMaxPeriod=i.stormParams.lightningMaxPeriod,this.stormParams.lightningMinDuration=i.stormParams.lightningMinDuration,this.stormParams.lightningMaxDuration=i.stormParams.lightningMaxDuration,this.lightningParameters=THREE.LightningStrike.copyParameters({},i.lightningParameters),this.lightningMaterial=i.stormParams.lightningMaterial,this.onLightningDown=i.onLightningDown,this},THREE.LightningStrike.prototype.clone=function(){return new this.constructor(this.stormParams).copy(this)};
//# sourceMappingURL=/sm/230224c2a25e3f1c7c1f5fca3470cbdde2aca0612359f3dfc2ea7efb64975357.map
/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/js/exporters/MMDExporter.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
console.warn("THREE.MMDExporter: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),THREE.MMDExporter=function(){var e;this.parseVpd=function(r,n,o){if(!0!==r.isSkinnedMesh)return console.warn("THREE.MMDExporter: parseVpd() requires SkinnedMesh instance."),null;function t(e){Math.abs(e)<1e-6&&(e=0);var r=e.toString();-1===r.indexOf(".")&&(r+=".");var n=(r+="000000").indexOf(".");return r.slice(0,n)+"."+r.slice(n+1,n+7)}function a(e){for(var r=[],n=0,o=e.length;n<o;n++)r.push(t(e[n]));return r.join(",")}r.updateMatrixWorld(!0);var i=r.skeleton.bones,s=function(e){var r=e.clone();return r.pose(),r.skeleton.bones}(r),u=new THREE.Vector3,p=new THREE.Quaternion,l=new THREE.Quaternion,h=new THREE.Matrix4,c=[];c.push("Vocaloid Pose Data file"),c.push(""),c.push((""!==r.name?r.name.replace(/\s/g,"_"):"skin")+".osm;"),c.push(i.length+";"),c.push("");for(var d=0,v=i.length;d<v;d++){var f=i[d],E=s[d];!0===o&&void 0!==f.userData.ik&&void 0!==f.userData.ik.originalMatrix?h.fromArray(f.userData.ik.originalMatrix):h.copy(f.matrix),u.setFromMatrixPosition(h),p.setFromRotationMatrix(h);var M=u.sub(E.position).toArray(),m=l.copy(E.quaternion).conjugate().multiply(p).toArray();M[2]=-M[2],m[0]=-m[0],m[1]=-m[1],c.push("Bone"+d+"{"+f.name),c.push("  "+a(M)+";"),c.push("  "+a(m)+";"),c.push("}"),c.push("")}c.push("");var x=c.join("\n");return!0===n?function(r){if(void 0===e){var n=(new MMDParser.CharsetEncoder).s2uTable;e={};for(var o=Object.keys(n),t=0,a=o.length;t<a;t++){var i=o[t],s=n[i];i=parseInt(i),e[s]=i}}var u=[];for(t=0,a=r.length;t<a;t++){var p=r.charCodeAt(t);if(void 0===(s=e[p]))throw"cannot convert charcode 0x"+p.toString(16);s>255?(u.push(s>>8&255),u.push(255&s)):u.push(255&s)}return new Uint8Array(u)}(x):x}};
//# sourceMappingURL=/sm/83aa1a32d179caa71bae4ddac0d0a57a21efdc47c0e504089a42239f99c9b134.map
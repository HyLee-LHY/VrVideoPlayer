/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/js/exporters/PLYExporter.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
console.warn("THREE.PLYExporter: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),THREE.PLYExporter=function(){},THREE.PLYExporter.prototype={constructor:THREE.PLYExporter,parse:function(t,e,n){function r(e){t.traverse(function(t){if(!0===t.isMesh){var n=t,r=n.geometry;!0===r.isGeometry&&(r=o.get(r)),!0===r.isBufferGeometry&&void 0!==r.getAttribute("position")&&e(n,r)}})}e&&"object"==typeof e&&(console.warn('THREE.PLYExporter: The options parameter is now the third argument to the "parse" function. See the documentation for the new API.'),n=e,e=void 0);var i=(n=Object.assign({binary:!1,excludeAttributes:[],littleEndian:!1},n)).excludeAttributes,o=new WeakMap,l=!1,a=!1,u=!1,s=0,d=0;t.traverse(function(t){if(!0===t.isMesh){var e=t,n=e.geometry;if(!0===n.isGeometry){var r=o.get(n)||(new THREE.BufferGeometry).setFromObject(e);o.set(n,r),n=r}if(!0===n.isBufferGeometry){var i=n.getAttribute("position"),f=n.getAttribute("normal"),g=n.getAttribute("uv"),p=n.getAttribute("color"),c=n.getIndex();if(void 0===i)return;s+=i.count,d+=c?c.count/3:i.count/3,void 0!==f&&(l=!0),void 0!==g&&(u=!0),void 0!==p&&(a=!0)}}});var f=-1===i.indexOf("index");if(l=l&&-1===i.indexOf("normal"),a=a&&-1===i.indexOf("color"),u=u&&-1===i.indexOf("uv"),f&&d!==Math.floor(d))return console.error("PLYExporter: Failed to generate a valid PLY file with triangle indices because the number of indices is not divisible by 3."),null;var g="ply\n"+`format ${n.binary?n.littleEndian?"binary_little_endian":"binary_big_endian":"ascii"} 1.0\n`+`element vertex ${s}\n`+"property float x\nproperty float y\nproperty float z\n";!0===l&&(g+="property float nx\nproperty float ny\nproperty float nz\n"),!0===u&&(g+="property float s\nproperty float t\n"),!0===a&&(g+="property uchar red\nproperty uchar green\nproperty uchar blue\n"),!0===f&&(g+=`element face ${d}\n`+"property list uchar int vertex_index\n"),g+="end_header\n";var p=new THREE.Vector3,c=new THREE.Matrix3,y=null;if(!0===n.binary){var E=(new TextEncoder).encode(g),x=s*(12+(l?12:0)+(a?3:0)+(u?8:0)),m=f?13*d:0,b=new DataView(new ArrayBuffer(E.length+x+m));new Uint8Array(b.buffer).set(E,0);var v=E.length,h=E.length+x,A=0;r(function(t,e){var r=e.getAttribute("position"),i=e.getAttribute("normal"),o=e.getAttribute("uv"),s=e.getAttribute("color"),d=e.getIndex();c.getNormalMatrix(t.matrixWorld);for(var g=0,y=r.count;g<y;g++)p.x=r.getX(g),p.y=r.getY(g),p.z=r.getZ(g),p.applyMatrix4(t.matrixWorld),b.setFloat32(v,p.x,n.littleEndian),v+=4,b.setFloat32(v,p.y,n.littleEndian),v+=4,b.setFloat32(v,p.z,n.littleEndian),v+=4,!0===l&&(null!=i?(p.x=i.getX(g),p.y=i.getY(g),p.z=i.getZ(g),p.applyMatrix3(c).normalize(),b.setFloat32(v,p.x,n.littleEndian),v+=4,b.setFloat32(v,p.y,n.littleEndian),v+=4,b.setFloat32(v,p.z,n.littleEndian),v+=4):(b.setFloat32(v,0,n.littleEndian),v+=4,b.setFloat32(v,0,n.littleEndian),v+=4,b.setFloat32(v,0,n.littleEndian),v+=4)),!0===u&&(null!=o?(b.setFloat32(v,o.getX(g),n.littleEndian),v+=4,b.setFloat32(v,o.getY(g),n.littleEndian),v+=4):!1!==u&&(b.setFloat32(v,0,n.littleEndian),v+=4,b.setFloat32(v,0,n.littleEndian),v+=4)),!0===a&&(null!=s?(b.setUint8(v,Math.floor(255*s.getX(g))),v+=1,b.setUint8(v,Math.floor(255*s.getY(g))),v+=1,b.setUint8(v,Math.floor(255*s.getZ(g))),v+=1):(b.setUint8(v,255),v+=1,b.setUint8(v,255),v+=1,b.setUint8(v,255),v+=1));if(!0===f)if(null!==d)for(g=0,y=d.count;g<y;g+=3)b.setUint8(h,3),h+=1,b.setUint32(h,d.getX(g+0)+A,n.littleEndian),h+=4,b.setUint32(h,d.getX(g+1)+A,n.littleEndian),h+=4,b.setUint32(h,d.getX(g+2)+A,n.littleEndian),h+=4;else for(g=0,y=r.count;g<y;g+=3)b.setUint8(h,3),h+=1,b.setUint32(h,A+g,n.littleEndian),h+=4,b.setUint32(h,A+g+1,n.littleEndian),h+=4,b.setUint32(h,A+g+2,n.littleEndian),h+=4;A+=r.count}),y=b.buffer}else{A=0;var M="",w="";r(function(t,e){var n=e.getAttribute("position"),r=e.getAttribute("normal"),i=e.getAttribute("uv"),o=e.getAttribute("color"),s=e.getIndex();c.getNormalMatrix(t.matrixWorld);for(var g=0,y=n.count;g<y;g++){p.x=n.getX(g),p.y=n.getY(g),p.z=n.getZ(g),p.applyMatrix4(t.matrixWorld);var E=p.x+" "+p.y+" "+p.z;!0===l&&(null!=r?(p.x=r.getX(g),p.y=r.getY(g),p.z=r.getZ(g),p.applyMatrix3(c).normalize(),E+=" "+p.x+" "+p.y+" "+p.z):E+=" 0 0 0"),!0===u&&(null!=i?E+=" "+i.getX(g)+" "+i.getY(g):!1!==u&&(E+=" 0 0")),!0===a&&(E+=null!=o?" "+Math.floor(255*o.getX(g))+" "+Math.floor(255*o.getY(g))+" "+Math.floor(255*o.getZ(g)):" 255 255 255"),M+=E+"\n"}if(!0===f){if(null!==s)for(g=0,y=s.count;g<y;g+=3)w+=`3 ${s.getX(g+0)+A}`,w+=` ${s.getX(g+1)+A}`,w+=` ${s.getX(g+2)+A}\n`;else for(g=0,y=n.count;g<y;g+=3)w+=`3 ${A+g} ${A+g+1} ${A+g+2}\n`;d+=s?s.count/3:n.count/3}A+=n.count}),y=`${g}${M}${f?`${w}\n`:"\n"}`}return"function"==typeof e&&requestAnimationFrame(()=>e(y)),y}};
//# sourceMappingURL=/sm/075eff02445d825fc79566ca00d7ac4ca82e4337af1a6492ac2ec145dfa5c241.map
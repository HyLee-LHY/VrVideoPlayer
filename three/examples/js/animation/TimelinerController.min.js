/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/js/animation/TimelinerController.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
console.warn("THREE.TimelinerController: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),THREE.TimelinerController=function(e,t,i){this._scene=e,this._trackInfo=t,this._onUpdate=i,this._mixer=new THREE.AnimationMixer(e),this._clip=null,this._action=null,this._tracks={},this._propRefs={},this._channelNames=[]},THREE.TimelinerController.prototype={constructor:THREE.TimelinerController,init:function(){for(var e=[],t=this._trackInfo,i=0,n=t.length;i!==n;++i){var r=t[i];e.push(this._addTrack(r.type,r.propertyPath,r.initialValue,r.interpolation))}this._clip=new THREE.AnimationClip("editclip",0,e),this._action=this._mixer.clipAction(this._clip).play()},setDisplayTime:function(e){this._action.time=e,this._mixer.update(0),this._onUpdate()},setDuration:function(e){this._clip.duration=e},getChannelNames:function(){return this._channelNames},getChannelKeyTimes:function(e){return this._tracks[e].times},setKeyframe:function(e,t){var i=this._tracks[e],n=i.times,r=Timeliner.binarySearch(n,t),s=i.values,a=i.getValueSize(),l=r*a;if(r<0){l=(r=~r)*a;for(var o=n.length+1,h=s.length+a,c=o-1;c!==r;--c)n[c]=n[c-1];c=h-1;for(var u=l+a-1;c!==u;--c)s[c]=s[c-a]}n[r]=t,this._propRefs[e].getValue(s,l)},delKeyframe:function(e,t){var i=this._tracks[e],n=i.times,r=Timeliner.binarySearch(n,t);if(n.length>1&&r>=0){for(var s=n.length-1,a=i.values,l=i.getValueSize(),o=a.length-l,h=r;h!==s;++h)n[h]=n[h+1];n.pop();for(var c=r*l;c!==o;++c)a[c]=a[c+l];a.length=o}},moveKeyframe:function(e,t,i,n){var r=this._tracks[e],s=r.times,a=Timeliner.binarySearch(s,t);if(a>=0){for(var l=n?s.length:a+1,o=s[a-1]<=t||!n&&t>=s[a+1];a!==l;)s[a++]+=i;o&&this._sort(r)}},serialize:function(){for(var e={duration:this._clip.duration,channels:{}},t=this._channelNames,i=this._tracks,n=e.channels,r=0,s=t.length;r!==s;++r){var a=t[r],l=i[a];n[a]={times:l.times,values:l.values}}return e},deserialize:function(e){var t=this._channelNames,i=this._tracks,n=e.channels;this.setDuration(e.duration);for(var r=0,s=t.length;r!==s;++r){var a=t[r],l=i[a],o=n[a];this._setArray(l.times,o.times),this._setArray(l.values,o.values)}this.setDisplayTime(this._mixer.time)},_sort:function(e){var t=e.times,i=THREE.AnimationUtils.getKeyframeOrder(t);this._setArray(t,THREE.AnimationUtils.sortedArray(t,1,i));var n=e.values,r=e.getValueSize();this._setArray(n,THREE.AnimationUtils.sortedArray(n,r,i))},_setArray:function(e,t){e.length=0,e.push.apply(e,t)},_addTrack:function(e,t,i,n){var r=new e(t,[0],i,n);return r.times=Array.prototype.slice.call(r.times),r.values=Array.prototype.slice.call(r.values),this._channelNames.push(t),this._tracks[t]=r,this._propRefs[t]=new THREE.PropertyBinding(this._scene,t),r}};
//# sourceMappingURL=/sm/bcf3f0265492188aefc1f3971331e7a334180d352ab61c4b995be9522e4af008.map
/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/js/curves/NURBSUtils.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
console.warn("THREE.NURBSUtils: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),THREE.NURBSUtils={findSpan:function(r,a,i){var n=i.length-r-1;if(a>=i[n])return n-1;if(a<=i[r])return r;for(var e=r,o=n,t=Math.floor((e+o)/2);a<i[t]||a>=i[t+1];)a<i[t]?o=t:e=t,t=Math.floor((e+o)/2);return t},calcBasisFunctions:function(r,a,i,n){var e=[],o=[],t=[];e[0]=1;for(var c=1;c<=i;++c){o[c]=a-n[r+1-c],t[c]=n[r+c]-a;for(var l=0,s=0;s<c;++s){var v=t[s+1],f=o[c-s],u=e[s]/(v+f);e[s]=l+v*u,l=f*u}e[c]=l}return e},calcBSplinePoint:function(r,a,i,n){for(var e=this.findSpan(r,n,a),o=this.calcBasisFunctions(e,n,r,a),t=new THREE.Vector4(0,0,0,0),c=0;c<=r;++c){var l=i[e-r+c],s=o[c],v=l.w*s;t.x+=l.x*v,t.y+=l.y*v,t.z+=l.z*v,t.w+=l.w*s}return t},calcBasisFunctionDerivatives:function(r,a,i,n,e){for(var o=[],t=0;t<=i;++t)o[t]=0;var c=[];for(t=0;t<=n;++t)c[t]=o.slice(0);var l=[];for(t=0;t<=i;++t)l[t]=o.slice(0);l[0][0]=1;for(var s=o.slice(0),v=o.slice(0),f=1;f<=i;++f){s[f]=a-e[r+1-f],v[f]=e[r+f]-a;for(var u=0,d=0;d<f;++d){var h=v[d+1],S=s[f-d];l[f][d]=h+S;var p=l[d][f-1]/l[f][d];l[d][f]=u+h*p,u=S*p}l[f][f]=u}for(f=0;f<=i;++f)c[0][f]=l[f][i];for(d=0;d<=i;++d){var E=0,w=1,m=[];for(t=0;t<=i;++t)m[t]=o.slice(0);m[0][0]=1;for(var y=1;y<=n;++y){var B=0,R=d-y,x=i-y;d>=y&&(m[w][0]=m[E][0]/l[x+1][R],B=m[w][0]*l[R][x]);var D=d-1<=x?y-1:i-d;for(f=R>=-1?1:-R;f<=D;++f)m[w][f]=(m[E][f]-m[E][f-1])/l[x+1][R+f],B+=m[w][f]*l[R+f][x];d<=x&&(m[w][y]=-m[E][y-1]/l[x+1][d],B+=m[w][y]*l[d][x]),c[y][d]=B;f=E;E=w,w=f}}for(d=i,y=1;y<=n;++y){for(f=0;f<=i;++f)c[y][f]*=d;d*=i-y}return c},calcBSplineDerivatives:function(r,a,i,n,e){for(var o=e<r?e:r,t=[],c=this.findSpan(r,n,a),l=this.calcBasisFunctionDerivatives(c,n,r,o,a),s=[],v=0;v<i.length;++v){var f=(d=i[v].clone()).w;d.x*=f,d.y*=f,d.z*=f,s[v]=d}for(var u=0;u<=o;++u){for(var d=s[c-r].clone().multiplyScalar(l[u][0]),h=1;h<=r;++h)d.add(s[c-r+h].clone().multiplyScalar(l[u][h]));t[u]=d}for(u=o+1;u<=e+1;++u)t[u]=new THREE.Vector4(0,0,0);return t},calcKoverI:function(r,a){for(var i=1,n=2;n<=r;++n)i*=n;var e=1;for(n=2;n<=a;++n)e*=n;for(n=2;n<=r-a;++n)e*=n;return i/e},calcRationalCurveDerivatives:function(r){for(var a=r.length,i=[],n=[],e=0;e<a;++e){var o=r[e];i[e]=new THREE.Vector3(o.x,o.y,o.z),n[e]=o.w}for(var t=[],c=0;c<a;++c){var l=i[c].clone();for(e=1;e<=c;++e)l.sub(t[c-e].clone().multiplyScalar(this.calcKoverI(c,e)*n[e]));t[c]=l.divideScalar(n[0])}return t},calcNURBSDerivatives:function(r,a,i,n,e){var o=this.calcBSplineDerivatives(r,a,i,n,e);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(r,a,i,n,e,o,t,c){for(var l=this.findSpan(r,o,i),s=this.findSpan(a,t,n),v=this.calcBasisFunctions(l,o,r,i),f=this.calcBasisFunctions(s,t,a,n),u=[],d=0;d<=a;++d){u[d]=new THREE.Vector4(0,0,0,0);for(var h=0;h<=r;++h){var S=e[l-r+h][s-a+d].clone(),p=S.w;S.x*=p,S.y*=p,S.z*=p,u[d].add(S.multiplyScalar(v[h]))}}var E=new THREE.Vector4(0,0,0,0);for(d=0;d<=a;++d)E.add(u[d].multiplyScalar(f[d]));E.divideScalar(E.w),c.set(E.x,E.y,E.z)}};
//# sourceMappingURL=/sm/e72f0e042c160fb92eb06936cb1eebcf4fdb0111e46c88863ae4e1c08c8456d0.map
/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/js/loaders/VRMLLoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
console.warn("THREE.VRMLLoader: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),THREE.VRMLLoader=function(){if("undefined"==typeof chevrotain)throw Error("THREE.VRMLLoader: External library chevrotain.min.js required.");function e(e){THREE.Loader.call(this,e)}function r(e){this.lexer=new chevrotain.Lexer(e)}function a(e){chevrotain.Parser.call(this,e);var r=this,a=e.Version,t=e.LCurly,n=e.RCurly,o=e.LSquare,i=e.RSquare,s=e.Identifier,l=e.RouteIdentifier,c=e.StringLiteral,u=e.HexLiteral,f=e.NumberLiteral,E=e.TrueLiteral,d=e.FalseLiteral,p=e.NullLiteral,h=e.DEF,v=e.USE,b=e.ROUTE,T=e.TO,R=e.NodeName;r.RULE("vrml",function(){r.SUBRULE(r.version),r.AT_LEAST_ONE(function(){r.SUBRULE(r.node)}),r.MANY(function(){r.SUBRULE(r.route)})}),r.RULE("version",function(){r.CONSUME(a)}),r.RULE("node",function(){r.OPTION(function(){r.SUBRULE(r.def)}),r.CONSUME(R),r.CONSUME(t),r.MANY(function(){r.SUBRULE(r.field)}),r.CONSUME(n)}),r.RULE("field",function(){r.CONSUME(s),r.OR2([{ALT:function(){r.SUBRULE(r.singleFieldValue)}},{ALT:function(){r.SUBRULE(r.multiFieldValue)}}])}),r.RULE("def",function(){r.CONSUME(h),r.OR([{ALT:function(){r.CONSUME(s)}},{ALT:function(){r.CONSUME(R)}}])}),r.RULE("use",function(){r.CONSUME(v),r.OR([{ALT:function(){r.CONSUME(s)}},{ALT:function(){r.CONSUME(R)}}])}),r.RULE("singleFieldValue",function(){r.AT_LEAST_ONE(function(){r.OR([{ALT:function(){r.SUBRULE(r.node)}},{ALT:function(){r.SUBRULE(r.use)}},{ALT:function(){r.CONSUME(c)}},{ALT:function(){r.CONSUME(u)}},{ALT:function(){r.CONSUME(f)}},{ALT:function(){r.CONSUME(E)}},{ALT:function(){r.CONSUME(d)}},{ALT:function(){r.CONSUME(p)}}])})}),r.RULE("multiFieldValue",function(){r.CONSUME(o),r.MANY(function(){r.OR([{ALT:function(){r.SUBRULE(r.node)}},{ALT:function(){r.SUBRULE(r.use)}},{ALT:function(){r.CONSUME(c)}},{ALT:function(){r.CONSUME(u)}},{ALT:function(){r.CONSUME(f)}},{ALT:function(){r.CONSUME(p)}}])}),r.CONSUME(i)}),r.RULE("route",function(){r.CONSUME(b),r.CONSUME(l),r.CONSUME(T),r.CONSUME2(l)}),this.performSelfAnalysis()}function t(e,r,a){this.a=e,this.b=r,this.c=a,this.normal=new THREE.Vector3}e.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:e,load:function(e,r,a,t){var n=this,o=""===n.path?THREE.LoaderUtils.extractUrlBase(e):n.path,i=new THREE.FileLoader(this.manager);i.setPath(n.path),i.load(e,function(a){try{r(n.parse(a,o))}catch(r){t?t(r):console.error(r),n.manager.itemError(e)}},a,t)},parse:function(e,o){var i={};function s(e){e.DEF&&(i[e.DEF]=e);for(var r=e.fields,a=0,t=r.length;a<t;a++){var n=r[a];if("node"===n.type)for(var o=n.values,l=0,c=o.length;l<c;l++)s(o[l])}}function l(e){return e.USE?(r=e.USE,(a=l(i[r])).isObject3D||a.isMaterial?a.clone():a):void 0!==e.build?e.build:(e.build=function(e){var r,a=e.name;switch(a){case"Group":case"Transform":case"Collision":r=function(e){for(var r=new THREE.Group,a=e.fields,t=0,n=a.length;t<n;t++){var o=a[t],i=o.name,s=o.values;switch(i){case"bboxCenter":case"bboxSize":case"center":break;case"children":f(s,r);break;case"collide":break;case"rotation":var l=new THREE.Vector3(s[0],s[1],s[2]),c=s[3];r.quaternion.setFromAxisAngle(l,c);break;case"scale":r.scale.set(s[0],s[1],s[2]);break;case"scaleOrientation":break;case"translation":r.position.set(s[0],s[1],s[2]);break;case"proxy":break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return r}(e);break;case"Background":r=function(e){for(var r,a,t,n,o=new THREE.Group,i=e.fields,s=0,l=i.length;s<l;s++){var c=i[s],u=c.name,f=c.values;switch(u){case"groundAngle":r=f;break;case"groundColor":a=f;break;case"backUrl":case"bottomUrl":case"frontUrl":case"leftUrl":case"rightUrl":case"topUrl":break;case"skyAngle":t=f;break;case"skyColor":n=f;break;default:console.warn("THREE.VRMLLoader: Unknown field:",u)}}if(n){var E=new THREE.SphereBufferGeometry(1e4,32,16),d=new THREE.MeshBasicMaterial({fog:!1,side:THREE.BackSide,depthWrite:!1,depthTest:!1});n.length>3?(C(E,1e4,t,M(n),!0),d.vertexColors=!0):d.color.setRGB(n[0],n[1],n[2]);var p=new THREE.Mesh(E,d);o.add(p)}if(a&&a.length>0){var h=new THREE.SphereBufferGeometry(1e4,32,16,0,2*Math.PI,.5*Math.PI,1.5*Math.PI),v=new THREE.MeshBasicMaterial({fog:!1,side:THREE.BackSide,vertexColors:!0,depthWrite:!1,depthTest:!1});C(h,1e4,r,M(a),!1);var b=new THREE.Mesh(h,v);o.add(b)}return o.renderOrder=-1/0,o}(e);break;case"Shape":r=function(e){for(var r,a,t=e.fields,n=new THREE.MeshBasicMaterial({color:0}),o=0,i=t.length;o<i;o++){var s=t[o],c=s.name,u=s.values;switch(c){case"appearance":null!==u[0]&&(n=l(u[0]));break;case"geometry":null!==u[0]&&(r=l(u[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",c)}}if(r&&r.attributes.position){var f=r._type;if("points"===f){var E=new THREE.PointsMaterial({color:16777215});void 0!==r.attributes.color?E.vertexColors=!0:n.isMeshPhongMaterial&&E.color.copy(n.emissive),a=new THREE.Points(r,E)}else if("line"===f){var d=new THREE.LineBasicMaterial({color:16777215});void 0!==r.attributes.color?d.vertexColors=!0:n.isMeshPhongMaterial&&d.color.copy(n.emissive),a=new THREE.LineSegments(r,d)}else void 0!==r._solid&&(n.side=r._solid?THREE.FrontSide:THREE.DoubleSide),void 0!==r.attributes.color&&(n.vertexColors=!0),a=new THREE.Mesh(r,n)}else(a=new THREE.Object3D).visible=!1;return a}(e);break;case"Appearance":r=function(e){for(var r,a=new THREE.MeshPhongMaterial,t=e.fields,o=0,i=t.length;o<i;o++){var s=t[o],c=s.name,u=s.values;switch(c){case"material":if(null!==u[0]){var f=l(u[0]);f.diffuseColor&&a.color.copy(f.diffuseColor),f.emissiveColor&&a.emissive.copy(f.emissiveColor),f.shininess&&(a.shininess=f.shininess),f.specularColor&&a.specular.copy(f.specularColor),f.transparency&&(a.opacity=1-f.transparency),f.transparency>0&&(a.transparent=!0)}else a=new THREE.MeshBasicMaterial({color:0});break;case"texture":var E=u[0];null!==E&&("ImageTexture"!==E.name&&"PixelTexture"!==E.name||(a.map=l(E)));break;case"textureTransform":null!==u[0]&&(r=l(u[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",c)}}if(a.map){if(a.map.__type){switch(a.map.__type){case n.INTENSITY_ALPHA:a.opacity=1;break;case n.RGB:a.color.set(16777215);break;case n.RGBA:a.color.set(16777215),a.opacity=1}delete a.map.__type}r&&(a.map.center.copy(r.center),a.map.rotation=r.rotation,a.map.repeat.copy(r.scale),a.map.offset.copy(r.translation))}return a}(e);break;case"Material":r=function(e){for(var r={},a=e.fields,t=0,n=a.length;t<n;t++){var o=a[t],i=o.name,s=o.values;switch(i){case"ambientIntensity":break;case"diffuseColor":r.diffuseColor=new THREE.Color(s[0],s[1],s[2]);break;case"emissiveColor":r.emissiveColor=new THREE.Color(s[0],s[1],s[2]);break;case"shininess":r.shininess=s[0];break;case"specularColor":r.emissiveColor=new THREE.Color(s[0],s[1],s[2]);break;case"transparency":r.transparency=s[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return r}(e);break;case"ImageTexture":r=function(e){for(var r,a=THREE.RepeatWrapping,t=THREE.RepeatWrapping,n=e.fields,o=0,i=n.length;o<i;o++){var s=n[o],l=s.name,c=s.values;switch(l){case"url":var u=c[0];u&&(r=V.load(u));break;case"repeatS":!1===c[0]&&(a=THREE.ClampToEdgeWrapping);break;case"repeatT":!1===c[0]&&(t=THREE.ClampToEdgeWrapping);break;default:console.warn("THREE.VRMLLoader: Unknown field:",l)}}r&&(r.wrapS=a,r.wrapT=t);return r}(e);break;case"PixelTexture":r=function(e){for(var r,a=THREE.RepeatWrapping,t=THREE.RepeatWrapping,n=e.fields,o=0,i=n.length;o<i;o++){var s=n[o],l=s.name,f=s.values;switch(l){case"image":for(var E=f[0],d=f[1],p=f[2],h=2===p||4===p,v=u(p),b=E*d*(!0===h?4:3),T=new Uint8Array(b),R={r:0,g:0,b:0,a:0},x=3,m=0,g=f.length;x<g;x++,m++)if(c(f[x],v,R),!0===h){var w=4*m;T[w+0]=R.r,T[w+1]=R.g,T[w+2]=R.b,T[w+3]=R.a}else{var w=3*m;T[w+0]=R.r,T[w+1]=R.g,T[w+2]=R.b}(r=new THREE.DataTexture(T,E,d,!0===h?THREE.RGBAFormat:THREE.RGBFormat)).__type=v;break;case"repeatS":!1===f[0]&&(a=THREE.ClampToEdgeWrapping);break;case"repeatT":!1===f[0]&&(t=THREE.ClampToEdgeWrapping);break;default:console.warn("THREE.VRMLLoader: Unknown field:",l)}}r&&(r.wrapS=a,r.wrapT=t);return r}(e);break;case"TextureTransform":r=function(e){for(var r={center:new THREE.Vector2,rotation:new THREE.Vector2,scale:new THREE.Vector2,translation:new THREE.Vector2},a=e.fields,t=0,n=a.length;t<n;t++){var o=a[t],i=o.name,s=o.values;switch(i){case"center":r.center.set(s[0],s[1]);break;case"rotation":r.rotation=s[0];break;case"scale":r.scale.set(s[0],s[1]);break;case"translation":r.translation.set(s[0],s[1]);break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return r}(e);break;case"IndexedFaceSet":r=function(e){for(var r,a,t,n,o,i,s,c,u=!0,f=!0,h=0,v=!0,b=!0,T=e.fields,R=0,x=T.length;R<x;R++){var m=T[R],g=m.name,k=m.values;switch(g){case"color":var H=k[0];null!==H&&(r=l(H));break;case"coord":var S=k[0];null!==S&&(a=l(S));break;case"normal":var U=k[0];null!==U&&(t=l(U));break;case"texCoord":var M=k[0];null!==M&&(n=l(M));break;case"ccw":u=k[0];break;case"colorIndex":o=k;break;case"colorPerVertex":v=k[0];break;case"convex":break;case"coordIndex":i=k;break;case"creaseAngle":h=k[0];break;case"normalIndex":s=k;break;case"normalPerVertex":b=k[0];break;case"solid":f=k[0];break;case"texCoordIndex":c=k;break;default:console.warn("THREE.VRMLLoader: Unknown field:",g)}}if(void 0===i)return console.warn("THREE.VRMLLoader: Missing coordIndex."),new THREE.BufferGeometry;var C,V,I,N,B=E(i,u);if(r)if(!0===v)if(o&&o.length>0){var O=E(o,u);V=w(B,O,r,3)}else V=y(B,new THREE.Float32BufferAttribute(r,3));else if(o&&o.length>0){var F=p(r,o),P=d(F,i);V=L(B,P)}else{var P=d(r,i);V=L(B,P)}if(t)if(!0===b)if(s&&s.length>0){var _=E(s,u);I=w(B,_,t,3)}else I=y(B,new THREE.Float32BufferAttribute(t,3));else if(s&&s.length>0){var G=p(t,s),z=d(G,i);I=L(B,z)}else{var z=d(t,i);I=L(B,z)}else I=A(B,a,h);if(n)if(c&&c.length>0){var D=E(c,u);N=w(B,D,n,2)}else N=y(B,new THREE.Float32BufferAttribute(n,2));var W=new THREE.BufferGeometry;C=y(B,new THREE.Float32BufferAttribute(a,3)),W.setAttribute("position",C),W.setAttribute("normal",I),V&&W.setAttribute("color",V);N&&W.setAttribute("uv",N);return W._solid=f,W._type="mesh",W}(e);break;case"IndexedLineSet":r=function(e){for(var r,a,t,n,o,i=!0,s=e.fields,c=0,u=s.length;c<u;c++){var f=s[c],E=f.name,d=f.values;switch(E){case"color":var b=d[0];null!==b&&(r=l(b));break;case"coord":var T=d[0];null!==T&&(a=l(T));break;case"colorIndex":t=d;break;case"colorPerVertex":i=d[0];break;case"coordIndex":n=d;break;default:console.warn("THREE.VRMLLoader: Unknown field:",E)}}var R=h(n);if(r)if(!0===i)if(t.length>0){var x=h(t);o=w(R,x,r,3)}else o=y(R,new THREE.Float32BufferAttribute(r,3));else if(t.length>0){var m=p(r,t),g=v(m,n);o=k(R,g)}else{var g=v(r,n);o=k(R,g)}var L=new THREE.BufferGeometry,H=y(R,new THREE.Float32BufferAttribute(a,3));L.setAttribute("position",H),o&&L.setAttribute("color",o);return L._type="line",L}(e);break;case"PointSet":r=function(e){for(var r,a,t=e.fields,n=0,o=t.length;n<o;n++){var i=t[n],s=i.name,c=i.values;switch(s){case"color":var u=c[0];null!==u&&(r=l(u));break;case"coord":var f=c[0];null!==f&&(a=l(f));break;default:console.warn("THREE.VRMLLoader: Unknown field:",s)}}var E;(E=new THREE.BufferGeometry).setAttribute("position",new THREE.Float32BufferAttribute(a,3)),r&&E.setAttribute("color",new THREE.Float32BufferAttribute(r,3));return E._type="points",E}(e);break;case"Box":r=function(e){for(var r=new THREE.Vector3(2,2,2),a=e.fields,t=0,n=a.length;t<n;t++){var o=a[t],i=o.name,s=o.values;switch(i){case"size":r.x=s[0],r.y=s[1],r.z=s[2];break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return new THREE.BoxBufferGeometry(r.x,r.y,r.z)}(e);break;case"Cone":r=function(e){for(var r=1,a=2,t=!1,n=e.fields,o=0,i=n.length;o<i;o++){var s=n[o],l=s.name,c=s.values;switch(l){case"bottom":t=!c[0];break;case"bottomRadius":r=c[0];break;case"height":a=c[0];break;case"side":break;default:console.warn("THREE.VRMLLoader: Unknown field:",l)}}return new THREE.ConeBufferGeometry(r,a,16,1,t)}(e);break;case"Cylinder":r=function(e){for(var r=1,a=2,t=e.fields,n=0,o=t.length;n<o;n++){var i=t[n],s=i.name,l=i.values;switch(s){case"bottom":break;case"radius":r=l[0];break;case"height":a=l[0];break;case"side":case"top":break;default:console.warn("THREE.VRMLLoader: Unknown field:",s)}}return new THREE.CylinderBufferGeometry(r,r,a,16,1)}(e);break;case"Sphere":r=function(e){for(var r=1,a=e.fields,t=0,n=a.length;t<n;t++){var o=a[t],i=o.name,s=o.values;switch(i){case"radius":r=s[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return new THREE.SphereBufferGeometry(r,16,16)}(e);break;case"ElevationGrid":r=function(e){for(var r,a,t,n,o=!0,i=!0,s=!0,c=!0,u=0,f=2,E=2,d=1,p=1,h=e.fields,v=0,b=h.length;v<b;v++){var T=h[v],R=T.name,x=T.values;switch(R){case"color":var m=x[0];null!==m&&(r=l(m));break;case"normal":var g=x[0];null!==g&&(a=l(g));break;case"texCoord":var w=x[0];null!==w&&(t=l(w));break;case"height":n=x;break;case"ccw":c=x[0];break;case"colorPerVertex":o=x[0];break;case"creaseAngle":u=x[0];break;case"normalPerVertex":i=x[0];break;case"solid":s=x[0];break;case"xDimension":f=x[0];break;case"xSpacing":d=x[0];break;case"zDimension":E=x[0];break;case"zSpacing":p=x[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",R)}}for(var L=[],k=[],H=[],S=[],v=0;v<E;v++)for(var U=0;U<f;U++){var M=v*f+U,C=d*v,V=n[M],I=p*U;if(L.push(C,V,I),r&&!0===o){var N=r[3*M+0],B=r[3*M+1],O=r[3*M+2];H.push(N,B,O)}if(a&&!0===i){var F=a[3*M+0],P=a[3*M+1],_=a[3*M+2];k.push(F,P,_)}if(t){var G=t[2*M+0],z=t[2*M+1];S.push(G,z)}else S.push(v/(f-1),U/(E-1))}for(var D=[],v=0;v<f-1;v++)for(var U=0;U<E-1;U++){var W=v+U*f,O=v+(U+1)*f,j=v+1+(U+1)*f,Y=v+1+U*f;!0===c?(D.push(W,j,O),D.push(j,W,Y)):(D.push(W,O,j),D.push(j,Y,W))}var q,X,K=y(D,new THREE.Float32BufferAttribute(L,3)),Q=y(D,new THREE.Float32BufferAttribute(S,2));if(r)if(!1===o){for(var v=0;v<f-1;v++)for(var U=0;U<E-1;U++){var M=v+U*(f-1),N=r[3*M+0],B=r[3*M+1],O=r[3*M+2];H.push(N,B,O),H.push(N,B,O),H.push(N,B,O),H.push(N,B,O),H.push(N,B,O),H.push(N,B,O)}q=new THREE.Float32BufferAttribute(H,3)}else q=y(D,new THREE.Float32BufferAttribute(H,3));if(a)if(!1===i){for(var v=0;v<f-1;v++)for(var U=0;U<E-1;U++){var M=v+U*(f-1),F=a[3*M+0],P=a[3*M+1],_=a[3*M+2];k.push(F,P,_),k.push(F,P,_),k.push(F,P,_),k.push(F,P,_),k.push(F,P,_),k.push(F,P,_)}X=new THREE.Float32BufferAttribute(k,3)}else X=y(D,new THREE.Float32BufferAttribute(k,3));else X=A(D,L,u);var Z=new THREE.BufferGeometry;Z.setAttribute("position",K),Z.setAttribute("normal",X),Z.setAttribute("uv",Q),q&&Z.setAttribute("color",q);return Z._solid=s,Z._type="mesh",Z}(e);break;case"Extrusion":r=function(e){for(var r,a,t=[1,1,1,-1,-1,-1,-1,1,1,1],n=[0,0,0,0,1,0],o=!0,i=!0,s=0,l=!0,c=!0,u=e.fields,f=0,E=u.length;f<E;f++){var d=u[f],p=d.name,h=d.values;switch(p){case"beginCap":o=h[0];break;case"ccw":i=h[0];break;case"convex":break;case"creaseAngle":s=h[0];break;case"crossSection":t=h;break;case"endCap":l=h[0];break;case"orientation":a=h;break;case"scale":r=h;break;case"solid":c=h[0];break;case"spine":n=h;break;default:console.warn("THREE.VRMLLoader: Unknown field:",p)}}for(var v=t[0]===t[t.length-2]&&t[1]===t[t.length-1],b=[],T=new THREE.Vector3,R=new THREE.Vector3,x=new THREE.Vector3,m=new THREE.Vector3,g=new THREE.Quaternion,f=0,w=0,L=0,k=n.length;f<k;f+=3,w+=2,L+=4){T.fromArray(n,f),R.x=r?r[w+0]:1,R.y=1,R.z=r?r[w+1]:1,x.x=a?a[L+0]:0,x.y=a?a[L+1]:0,x.z=a?a[L+2]:1;for(var H=a?a[L+3]:0,S=0,U=t.length;S<U;S+=2)m.x=t[S+0],m.y=0,m.z=t[S+1],m.multiply(R),g.setFromAxisAngle(x,H),m.applyQuaternion(g),m.add(T),b.push(m.x,m.y,m.z)}for(var M=[],C=n.length/3,V=t.length/2,f=0;f<C-1;f++)for(var w=0;w<V-1;w++){var I=w+f*V,N=w+1+f*V,B=w+(f+1)*V,O=w+1+(f+1)*V;w===V-2&&!0===v&&(N=f*V,O=(f+1)*V),!0===i?(M.push(I,N,B),M.push(B,N,O)):(M.push(I,B,N),M.push(B,O,N))}if(!0===o||!0===l){for(var F=[],f=0,E=t.length;f<E;f+=2)F.push(new THREE.Vector2(t[f],t[f+1]));for(var P=THREE.ShapeUtils.triangulateShape(F,[]),_=[],f=0,E=P.length;f<E;f++){var G=P[f];_.push(G[0],G[1],G[2])}if(!0===o)for(var f=0,E=_.length;f<E;f+=3)!0===i?M.push(_[f+0],_[f+1],_[f+2]):M.push(_[f+0],_[f+2],_[f+1]);if(!0===l)for(var z=V*(C-1),f=0,E=_.length;f<E;f+=3)!0===i?M.push(z+_[f+0],z+_[f+2],z+_[f+1]):M.push(z+_[f+0],z+_[f+1],z+_[f+2])}var D=y(M,new THREE.Float32BufferAttribute(b,3)),W=A(M,b,s),j=new THREE.BufferGeometry;return j.setAttribute("position",D),j.setAttribute("normal",W),j._solid=c,j._type="mesh",j}(e);break;case"Color":case"Coordinate":case"Normal":case"TextureCoordinate":r=function(e){return e.fields[0].values}(e);break;case"WorldInfo":r=function(e){for(var r={},a=e.fields,t=0,n=a.length;t<n;t++){var o=a[t],i=o.name,s=o.values;switch(i){case"title":r.title=s[0];break;case"info":r.info=s;break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return r}(e);break;case"Anchor":case"Billboard":case"Inline":case"LOD":case"Switch":case"AudioClip":case"DirectionalLight":case"PointLight":case"Script":case"Sound":case"SpotLight":case"CylinderSensor":case"PlaneSensor":case"ProximitySensor":case"SphereSensor":case"TimeSensor":case"TouchSensor":case"VisibilitySensor":case"Text":case"FontStyle":case"MovieTexture":case"ColorInterpolator":case"CoordinateInterpolator":case"NormalInterpolator":case"OrientationInterpolator":case"PositionInterpolator":case"ScalarInterpolator":case"Fog":case"NavigationInfo":case"Viewpoint":break;default:console.warn("THREE.VRMLLoader: Unknown node:",a)}return r}(e),e.build);var r,a}function c(e,r,a){switch(r){case n.INTENSITY:var t=parseInt(e);a.r=t,a.g=t,a.b=t;break;case n.INTENSITY_ALPHA:t=parseInt("0x"+e.substring(2,4));a.r=t,a.g=t,a.b=t,a.a=parseInt("0x"+e.substring(4,6));break;case n.RGB:a.r=parseInt("0x"+e.substring(2,4)),a.g=parseInt("0x"+e.substring(4,6)),a.b=parseInt("0x"+e.substring(6,8));break;case n.RGBA:a.r=parseInt("0x"+e.substring(2,4)),a.g=parseInt("0x"+e.substring(4,6)),a.b=parseInt("0x"+e.substring(6,8)),a.a=parseInt("0x"+e.substring(8,10))}}function u(e){var r;switch(e){case 1:r=n.INTENSITY;break;case 2:r=n.INTENSITY_ALPHA;break;case 3:r=n.RGB;break;case 4:r=n.RGBA}return r}function f(e,r){for(var a=0,t=e.length;a<t;a++){var n=l(e[a]);n instanceof THREE.Object3D&&r.add(n)}}function E(e,r){for(var a=[],t=0,n=0,o=e.length;n<o;n++){var i=e[t],s=e[n+(r?1:2)],l=e[n+(r?2:1)];a.push(i,s,l),(-1===e[n+3]||n+3>=o)&&(t=(n+=3)+1)}return a}function d(e,r){for(var a=[],t=0,n=0,o=r.length;n<o;n++){var i=3*t,s=e[i],l=e[i+1],c=e[i+2];a.push(s,l,c),(-1===r[n+3]||n+3>=o)&&(n+=3,t++)}return a}function p(e,r){for(var a=[],t=0,n=r.length;t<n;t++){var o=3*r[t],i=e[o],s=e[o+1],l=e[o+2];a.push(i,s,l)}return a}function h(e){for(var r=[],a=0,t=e.length;a<t;a++){var n=e[a],o=e[a+1];r.push(n,o),(-1===e[a+2]||a+2>=t)&&(a+=2)}return r}function v(e,r){for(var a=[],t=0,n=0,o=r.length;n<o;n++){var i=3*t,s=e[i],l=e[i+1],c=e[i+2];a.push(s,l,c),(-1===r[n+2]||n+2>=o)&&(n+=2,t++)}return a}var b=new THREE.Vector3,T=new THREE.Vector3,R=new THREE.Vector3,x=new THREE.Vector2,m=new THREE.Vector2,g=new THREE.Vector2;function w(e,r,a,t){for(var n=[],o=0,i=e.length;o<i;o+=3){var s=r[o],l=r[o+1],c=r[o+2];2===t?(x.fromArray(a,s*t),m.fromArray(a,l*t),g.fromArray(a,c*t),n.push(x.x,x.y),n.push(m.x,m.y),n.push(g.x,g.y)):(b.fromArray(a,s*t),T.fromArray(a,l*t),R.fromArray(a,c*t),n.push(b.x,b.y,b.z),n.push(T.x,T.y,T.z),n.push(R.x,R.y,R.z))}return new THREE.Float32BufferAttribute(n,t)}function L(e,r){for(var a=[],t=0,n=0,o=e.length;t<o;t+=3,n++)b.fromArray(r,3*n),a.push(b.x,b.y,b.z),a.push(b.x,b.y,b.z),a.push(b.x,b.y,b.z);return new THREE.Float32BufferAttribute(a,3)}function k(e,r){for(var a=[],t=0,n=0,o=e.length;t<o;t+=2,n++)b.fromArray(r,3*n),a.push(b.x,b.y,b.z),a.push(b.x,b.y,b.z);return new THREE.Float32BufferAttribute(a,3)}function y(e,r){for(var a=r.array,t=r.itemSize,n=new a.constructor(e.length*t),o=0,i=0,s=0,l=e.length;s<l;s++){o=e[s]*t;for(var c=0;c<t;c++)n[i++]=a[o++]}return new THREE.Float32BufferAttribute(n,t)}var H=new THREE.Vector3,S=new THREE.Vector3;function A(e,r,a){for(var n=[],o={},i=0,s=e.length;i<s;i+=3){var l=e[i],c=e[i+1],u=e[i+2],f=new t(l,c,u);b.fromArray(r,3*l),T.fromArray(r,3*c),R.fromArray(r,3*u),S.subVectors(R,T),H.subVectors(b,T),S.cross(H),S.normalize(),f.normal.copy(S),void 0===o[l]&&(o[l]=[]),void 0===o[c]&&(o[c]=[]),void 0===o[u]&&(o[u]=[]),o[l].push(f.normal),o[c].push(f.normal),o[u].push(f.normal),n.push(f)}var E=[];for(i=0,s=n.length;i<s;i++){var d=U(o[(f=n[i]).a],f.normal,a),p=U(o[f.b],f.normal,a),h=U(o[f.c],f.normal,a);b.fromArray(r,3*f.a),T.fromArray(r,3*f.b),R.fromArray(r,3*f.c),E.push(d.x,d.y,d.z),E.push(p.x,p.y,p.z),E.push(h.x,h.y,h.z)}return new THREE.Float32BufferAttribute(E,3)}function U(e,r,a){var t=new THREE.Vector3;if(0===a)t.copy(r);else for(var n=0,o=e.length;n<o;n++)e[n].angleTo(r)<a&&t.add(e[n]);return t.normalize()}function M(e){for(var r=[],a=0,t=e.length;a<t;a+=3)r.push(new THREE.Color(e[a],e[a+1],e[a+2]));return r}function C(e,r,a,t,n){for(var o=[],i=!0===n?0:Math.PI,s=0,l=t.length;s<l;s++){var c=0===s?0:a[s-1];c=!0===n?c:i-c;var u=new THREE.Vector3;u.setFromSphericalCoords(r,c,0),o.push(u)}var f=e.index,E=e.attributes.position,d=new THREE.BufferAttribute(new Float32Array(3*e.attributes.position.count),3),p=new THREE.Vector3,h=new THREE.Color;for(s=0;s<f.count;s++){var v,b,T=f.getX(s);p.fromBufferAttribute(E,T);for(var R=1,x=1;x<o.length;x++){b=x;var m=o[v=x-1],g=o[b];if(!0===n){if(p.y<=m.y&&p.y>g.y){R=Math.abs(m.y-p.y)/Math.abs(m.y-g.y);break}}else if(p.y>=m.y&&p.y<g.y){R=Math.abs(m.y-p.y)/Math.abs(m.y-g.y);break}}var w=t[v],L=t[b];h.copy(w).lerp(L,R),d.setXYZ(T,h.r,h.g,h.b)}e.setAttribute("color",d)}var V=new THREE.TextureLoader(this.manager);if(V.setPath(this.resourcePath||o).setCrossOrigin(this.crossOrigin),-1===e.indexOf("#VRML V2.0"))throw Error("THREE.VRMLLexer: Version of VRML asset not supported.");return function(e){for(var r=e.nodes,a=new THREE.Scene,t=0,n=r.length;t<n;t++)s(o=r[t]);for(t=0,n=r.length;t<n;t++){var o,i=l(o=r[t]);i instanceof THREE.Object3D&&a.add(i),"WorldInfo"===o.name&&(a.userData.worldInfo=i)}return a}(function(e){var t=function(){for(var e=chevrotain.createToken,r=e({name:"RouteIdentifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*[\.][^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*/}),a=e({name:"Identifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*/,longer_alt:r}),t=e({name:"Version",pattern:/#VRML.*/,longer_alt:a}),n=e({name:"NodeName",pattern:new RegExp(["Anchor","Billboard","Collision","Group","Transform","Inline","LOD","Switch","AudioClip","DirectionalLight","PointLight","Script","Shape","Sound","SpotLight","WorldInfo","CylinderSensor","PlaneSensor","ProximitySensor","SphereSensor","TimeSensor","TouchSensor","VisibilitySensor","Box","Cone","Cylinder","ElevationGrid","Extrusion","IndexedFaceSet","IndexedLineSet","PointSet","Sphere","Color","Coordinate","Normal","TextureCoordinate","Appearance","FontStyle","ImageTexture","Material","MovieTexture","PixelTexture","TextureTransform","ColorInterpolator","CoordinateInterpolator","NormalInterpolator","OrientationInterpolator","PositionInterpolator","ScalarInterpolator","Background","Fog","NavigationInfo","Viewpoint","Text"].join("|")),longer_alt:a}),o=e({name:"DEF",pattern:/DEF/,longer_alt:a}),i=e({name:"USE",pattern:/USE/,longer_alt:a}),s=e({name:"ROUTE",pattern:/ROUTE/,longer_alt:a}),l=e({name:"TO",pattern:/TO/,longer_alt:a}),c=e({name:"StringLiteral",pattern:/"(:?[^\\"\n\r]+|\\(:?[bfnrtv"\\/]|u[0-9a-fA-F]{4}))*"/}),u=e({name:"HexLiteral",pattern:/0[xX][0-9a-fA-F]+/}),f=e({name:"NumberLiteral",pattern:/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/}),E=e({name:"TrueLiteral",pattern:/TRUE/}),d=e({name:"FalseLiteral",pattern:/FALSE/}),p=e({name:"NullLiteral",pattern:/NULL/}),h=e({name:"LSquare",pattern:/\[/}),v=e({name:"RSquare",pattern:/]/}),b=e({name:"LCurly",pattern:/{/}),T=e({name:"RCurly",pattern:/}/}),R=e({name:"Comment",pattern:/#.*/,group:chevrotain.Lexer.SKIPPED}),x=[e({name:"WhiteSpace",pattern:/[ ,\s]/,group:chevrotain.Lexer.SKIPPED}),n,o,i,s,l,E,d,p,t,a,r,c,u,f,h,v,b,T,R],m={},g=0,w=x.length;g<w;g++){var L=x[g];m[L.name]=L}return{tokens:x,tokenVocabulary:m}}(),n=new r(t.tokens),o=new a(t.tokenVocabulary),i=function(e){function r(){e.call(this),this.validateVisitor()}function a(e,r){var a={type:null,values:[]};if(r.node){a.type="node";for(var t=0,n=r.node.length;t<n;t++){var o=r.node[t];a.values.push(e.visit(o))}}if(r.use){a.type="use";for(var t=0,n=r.use.length;t<n;t++){var i=r.use[t];a.values.push(e.visit(i))}}if(r.StringLiteral){a.type="string";for(var t=0,n=r.StringLiteral.length;t<n;t++){var s=r.StringLiteral[t];a.values.push(s.image.replace(/'|"/g,""))}}if(r.NumberLiteral){a.type="number";for(var t=0,n=r.NumberLiteral.length;t<n;t++){var l=r.NumberLiteral[t];a.values.push(parseFloat(l.image))}}if(r.HexLiteral){a.type="hex";for(var t=0,n=r.HexLiteral.length;t<n;t++){var c=r.HexLiteral[t];a.values.push(c.image)}}if(r.TrueLiteral){a.type="boolean";for(var t=0,n=r.TrueLiteral.length;t<n;t++){var u=r.TrueLiteral[t];"TRUE"===u.image&&a.values.push(!0)}}if(r.FalseLiteral){a.type="boolean";for(var t=0,n=r.FalseLiteral.length;t<n;t++){var f=r.FalseLiteral[t];"FALSE"===f.image&&a.values.push(!1)}}return r.NullLiteral&&(a.type="null",r.NullLiteral.forEach(function(){a.values.push(null)})),a}return r.prototype=Object.assign(Object.create(e.prototype),{constructor:r,vrml:function(e){for(var r={version:this.visit(e.version),nodes:[],routes:[]},a=0,t=e.node.length;a<t;a++){var n=e.node[a];r.nodes.push(this.visit(n))}if(e.route)for(a=0,t=e.route.length;a<t;a++){var o=e.route[a];r.routes.push(this.visit(o))}return r},version:function(e){return e.Version[0].image},node:function(e){var r={name:e.NodeName[0].image,fields:[]};if(e.field)for(var a=0,t=e.field.length;a<t;a++){var n=e.field[a];r.fields.push(this.visit(n))}return e.def&&(r.DEF=this.visit(e.def[0])),r},field:function(e){var r,a={name:e.Identifier[0].image,type:null,values:null};return e.singleFieldValue&&(r=this.visit(e.singleFieldValue[0])),e.multiFieldValue&&(r=this.visit(e.multiFieldValue[0])),a.type=r.type,a.values=r.values,a},def:function(e){return(e.Identifier||e.NodeName)[0].image},use:function(e){return{USE:(e.Identifier||e.NodeName)[0].image}},singleFieldValue:function(e){return a(this,e)},multiFieldValue:function(e){return a(this,e)},route:function(e){return{FROM:e.RouteIdentifier[0].image,TO:e.RouteIdentifier[1].image}}}),new r}(o.getBaseCstVisitorConstructor()),s=n.lex(e);o.input=s.tokens;var l=o.vrml();if(o.errors.length>0)throw console.error(o.errors),Error("THREE.VRMLLoader: Parsing errors detected.");return i.visit(l)}(e))}}),r.prototype={constructor:r,lex:function(e){var r=this.lexer.tokenize(e);if(r.errors.length>0)throw console.error(r.errors),Error("THREE.VRMLLexer: Lexing errors detected.");return r}},a.prototype=Object.create(chevrotain.Parser.prototype),a.prototype.constructor=a;var n={INTENSITY:1,INTENSITY_ALPHA:2,RGB:3,RGBA:4};return e}();
//# sourceMappingURL=/sm/9243106f3d00a0eb67b58eaed0769a0976296e52086b8b346d406a93d38e1931.map
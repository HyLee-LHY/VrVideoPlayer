/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/js/loaders/3MFLoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
console.warn("THREE.3MFLoader: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),THREE.ThreeMFLoader=function(e){THREE.Loader.call(this,e),this.availableExtensions=[]},THREE.ThreeMFLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.ThreeMFLoader,load:function(e,t,r,a){var i=this,n=new THREE.FileLoader(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.load(e,function(r){try{t(i.parse(r))}catch(t){a?a(t):console.error(t),i.manager.itemError(e)}},r,a)},parse:function(e){var t=this,r=new THREE.TextureLoader(this.manager);function a(e){for(var t=[],r=(new DOMParser).parseFromString(e,"application/xml").querySelectorAll("Relationship"),a=0;a<r.length;a++){var i=r[a],n={target:i.getAttribute("Target"),id:i.getAttribute("Id"),type:i.getAttribute("Type")};t.push(n)}return t}function i(e){for(var t={id:e.getAttribute("id"),basematerials:[]},r=e.querySelectorAll("base"),a=0;a<r.length;a++){var i=u(r[a]);i.index=a,t.basematerials.push(i)}return t}function n(e){for(var t={id:e.getAttribute("id"),texid:e.getAttribute("texid"),displaypropertiesid:e.getAttribute("displaypropertiesid")},r=e.querySelectorAll("tex2coord"),a=[],i=0;i<r.length;i++){var n=r[i],o=n.getAttribute("u"),s=n.getAttribute("v");a.push(parseFloat(o),parseFloat(s))}return t.uvs=new Float32Array(a),t}function o(e){for(var t={id:e.getAttribute("id"),displaypropertiesid:e.getAttribute("displaypropertiesid")},r=e.querySelectorAll("color"),a=[],i=new THREE.Color,n=0;n<r.length;n++){var o=r[n].getAttribute("color");i.setStyle(o.substring(0,7)),i.convertSRGBToLinear(),a.push(i.r,i.g,i.b)}return t.colors=new Float32Array(a),t}function s(e){for(var t={id:e.getAttribute("id")},r=e.querySelectorAll("pbmetallic"),a=[],i=0;i<r.length;i++){var n=r[i];a.push({name:n.getAttribute("name"),metallicness:parseFloat(n.getAttribute("metallicness")),roughness:parseFloat(n.getAttribute("roughness"))})}return t.data=a,t}function u(e){var t={};return t.name=e.getAttribute("name"),t.displaycolor=e.getAttribute("displaycolor"),t.displaypropertiesid=e.getAttribute("displaypropertiesid"),t}function l(e){var t={};t.objectId=e.getAttribute("objectid");var r=e.getAttribute("transform");return r&&(t.transform=p(r)),t}function p(e){var t=[];e.split(" ").forEach(function(e){t.push(parseFloat(e))});var r=new THREE.Matrix4;return r.set(t[0],t[3],t[6],t[9],t[1],t[4],t[7],t[10],t[2],t[5],t[8],t[11],0,0,0,1),r}function c(e){var t={type:e.getAttribute("type")},r=e.getAttribute("id");r&&(t.id=r);var a=e.getAttribute("pid");a&&(t.pid=a);var i=e.getAttribute("pindex");i&&(t.pindex=i);var n=e.getAttribute("thumbnail");n&&(t.thumbnail=n);var o=e.getAttribute("partnumber");o&&(t.partnumber=o);var s=e.getAttribute("name");s&&(t.name=s);var u=e.querySelector("mesh");u&&(t.mesh=function(e){for(var t={},r=[],a=e.querySelectorAll("vertices vertex"),i=0;i<a.length;i++){var n=a[i],o=n.getAttribute("x"),s=n.getAttribute("y"),u=n.getAttribute("z");r.push(parseFloat(o),parseFloat(s),parseFloat(u))}t.vertices=new Float32Array(r);var l=[],p=[],c=e.querySelectorAll("triangles triangle");for(i=0;i<c.length;i++){var d=c[i],h=d.getAttribute("v1"),v=d.getAttribute("v2"),g=d.getAttribute("v3"),f=d.getAttribute("p1"),b=d.getAttribute("p2"),E=d.getAttribute("p3"),m=d.getAttribute("pid"),A={};A.v1=parseInt(h,10),A.v2=parseInt(v,10),A.v3=parseInt(g,10),p.push(A.v1,A.v2,A.v3),f&&(A.p1=parseInt(f,10)),b&&(A.p2=parseInt(b,10)),E&&(A.p3=parseInt(E,10)),m&&(A.pid=m),0<Object.keys(A).length&&l.push(A)}return t.triangleProperties=l,t.triangles=new Uint32Array(p),t}(u));var p=e.querySelector("components");return p&&(t.components=function(e){for(var t=[],r=e.querySelectorAll("component"),a=0;a<r.length;a++){var i=l(r[a]);t.push(i)}return t}(p)),t}function d(e){var t={unit:e.getAttribute("unit")||"millimeter"},r=e.querySelectorAll("metadata");r&&(t.metadata=function(e){for(var t={},r=0;r<e.length;r++){var a=e[r],i=a.getAttribute("name");0<=["Title","Designer","Description","Copyright","LicenseTerms","Rating","CreationDate","ModificationDate"].indexOf(i)&&(t[i]=a.textContent)}return t}(r));var a=e.querySelector("resources");a&&(t.resources=function(e){for(var t={basematerials:{}},r=e.querySelectorAll("basematerials"),a=0;a<r.length;a++){var u=i(r[a]);t.basematerials[u.id]=u}t.texture2d={};var l,p=e.querySelectorAll("texture2d");for(a=0;a<p.length;a++){var d=p[a],h={id:(l=d).getAttribute("id"),path:l.getAttribute("path"),contenttype:l.getAttribute("contenttype"),tilestyleu:l.getAttribute("tilestyleu"),tilestylev:l.getAttribute("tilestylev"),filter:l.getAttribute("filter")};t.texture2d[h.id]=h}t.colorgroup={};var v=e.querySelectorAll("colorgroup");for(a=0;a<v.length;a++){var g=o(v[a]);t.colorgroup[g.id]=g}t.pbmetallicdisplayproperties={};var f=e.querySelectorAll("pbmetallicdisplayproperties");for(a=0;a<f.length;a++){var b=s(f[a]);t.pbmetallicdisplayproperties[b.id]=b}t.texture2dgroup={};var E=e.querySelectorAll("texture2dgroup");for(a=0;a<E.length;a++){var m=n(E[a]);t.texture2dgroup[m.id]=m}t.object={};var A=e.querySelectorAll("object");for(a=0;a<A.length;a++){var y=c(A[a]);t.object[y.id]=y}return t}(a));var u=e.querySelector("build");return u&&(t.build=function(e){for(var t=[],r=e.querySelectorAll("item"),a=0;a<r.length;a++){var i=r[a],n={objectId:i.getAttribute("objectid")},o=i.getAttribute("transform");o&&(n.transform=p(o)),t.push(n)}return t}(u)),t}function h(e,t,a,i){var n=e.texid,o=a.resources.texture2d[n];if(o){var s=i[o.path],u=o.contenttype,l=new Blob([s],{type:u}),p=URL.createObjectURL(l),c=r.load(p,function(){URL.revokeObjectURL(p)});switch(c.encoding=THREE.sRGBEncoding,o.tilestyleu){case"wrap":c.wrapS=THREE.RepeatWrapping;break;case"mirror":c.wrapS=THREE.MirroredRepeatWrapping;break;case"none":case"clamp":c.wrapS=THREE.ClampToEdgeWrapping;break;default:c.wrapS=THREE.RepeatWrapping}switch(o.tilestylev){case"wrap":c.wrapT=THREE.RepeatWrapping;break;case"mirror":c.wrapT=THREE.MirroredRepeatWrapping;break;case"none":case"clamp":c.wrapT=THREE.ClampToEdgeWrapping;break;default:c.wrapT=THREE.RepeatWrapping}switch(o.filter){case"auto":c.magFilter=THREE.LinearFilter,c.minFilter=THREE.LinearMipmapLinearFilter;break;case"linear":c.magFilter=THREE.LinearFilter,c.minFilter=THREE.LinearFilter;break;case"nearest":c.magFilter=THREE.NearestFilter,c.minFilter=THREE.NearestFilter;break;default:c.magFilter=THREE.LinearFilter,c.minFilter=THREE.LinearMipmapLinearFilter}return c}return null}function v(e,t,r,a,i,n){for(var o=n.pindex,s={},u=0,l=t.length;u<l;u++){var p=void 0!==(R=t[u]).p1?R.p1:o;void 0===s[p]&&(s[p]=[]),s[p].push(R)}var c=Object.keys(s),d=[];for(u=0,l=c.length;u<l;u++){for(var h=c[u],v=s[h],g=A(e.basematerials[h],H,r,i,n,y),f=new THREE.BufferGeometry,b=[],E=a.vertices,m=0,T=v.length;m<T;m++){var R=v[m];b.push(E[3*R.v1+0]),b.push(E[3*R.v1+1]),b.push(E[3*R.v1+2]),b.push(E[3*R.v2+0]),b.push(E[3*R.v2+1]),b.push(E[3*R.v2+2]),b.push(E[3*R.v3+0]),b.push(E[3*R.v3+1]),b.push(E[3*R.v3+2])}f.setAttribute("position",new THREE.Float32BufferAttribute(b,3));var w=new THREE.Mesh(f,g);d.push(w)}return d}function g(e,t,r,a,i,n){for(var o=new THREE.BufferGeometry,s=[],u=[],l=a.vertices,p=e.uvs,c=0,d=t.length;c<d;c++){var v=t[c];s.push(l[3*v.v1+0]),s.push(l[3*v.v1+1]),s.push(l[3*v.v1+2]),s.push(l[3*v.v2+0]),s.push(l[3*v.v2+1]),s.push(l[3*v.v2+2]),s.push(l[3*v.v3+0]),s.push(l[3*v.v3+1]),s.push(l[3*v.v3+2]),u.push(p[2*v.p1+0]),u.push(p[2*v.p1+1]),u.push(p[2*v.p2+0]),u.push(p[2*v.p2+1]),u.push(p[2*v.p3+0]),u.push(p[2*v.p3+1])}o.setAttribute("position",new THREE.Float32BufferAttribute(s,3)),o.setAttribute("uv",new THREE.Float32BufferAttribute(u,2));var g=A(e,H,r,i,n,h),f=new THREE.MeshPhongMaterial({map:g,flatShading:!0});return new THREE.Mesh(o,f)}function f(e,t,r,a){for(var i=new THREE.BufferGeometry,n=[],o=[],s=a.vertices,u=e.colors,l=0,p=t.length;l<p;l++){var c=t[l],d=c.v1,h=c.v2,v=c.v3;n.push(s[3*d+0]),n.push(s[3*d+1]),n.push(s[3*d+2]),n.push(s[3*h+0]),n.push(s[3*h+1]),n.push(s[3*h+2]),n.push(s[3*v+0]),n.push(s[3*v+1]),n.push(s[3*v+2]);var g=c.p1,f=c.p2,b=c.p3;o.push(u[3*g+0]),o.push(u[3*g+1]),o.push(u[3*g+2]),o.push(u[3*(f||g)+0]),o.push(u[3*(f||g)+1]),o.push(u[3*(f||g)+2]),o.push(u[3*(b||g)+0]),o.push(u[3*(b||g)+1]),o.push(u[3*(b||g)+2])}i.setAttribute("position",new THREE.Float32BufferAttribute(n,3)),i.setAttribute("color",new THREE.Float32BufferAttribute(o,3));var E=new THREE.MeshPhongMaterial({vertexColors:!0,flatShading:!0});return new THREE.Mesh(i,E)}function b(e){var t=new THREE.BufferGeometry;t.setIndex(new THREE.BufferAttribute(e.triangles,1)),t.setAttribute("position",new THREE.BufferAttribute(e.vertices,3));var r=new THREE.MeshPhongMaterial({color:11184895,flatShading:!0});return new THREE.Mesh(t,r)}function E(e,t){return void 0!==t.resources.texture2dgroup[e]?"texture":void 0!==t.resources.basematerials[e]?"material":void 0!==t.resources.colorgroup[e]?"vertexColors":"default"===e?"default":void 0}function m(e,t,r,a,i){for(var n=new THREE.Group,o=function(e,t,r,a,i){for(var n=Object.keys(e),o=[],s=0,u=n.length;s<u;s++){var l=n[s],p=e[l];switch(E(l,t)){case"material":for(var c=v(t.resources.basematerials[l],p,t,r,a,i),d=0,h=c.length;d<h;d++)o.push(c[d]);break;case"texture":var m=t.resources.texture2dgroup[l];o.push(g(m,p,t,r,a,i));break;case"vertexColors":var A=t.resources.colorgroup[l];o.push(f(A,p,0,r));break;case"default":o.push(b(r));break;default:console.error("THREE.3MFLoader: Unsupported resource type.")}}return o}(function(e,t,r){for(var a={},i=t.triangleProperties,n=r.pid,o=0,s=i.length;o<s;o++){var u=i[o],l=void 0!==u.pid?u.pid:n;void 0===l&&(l="default"),void 0===a[l]&&(a[l]=[]),a[l].push(u)}return a}(0,e,i),r,e,a,i),s=0,u=o.length;s<u;s++)n.add(o[s]);return n}function A(e,t,r,a,i,n){return void 0!==e.build?e.build:(e.build=n(e,t,r,a,i),e.build)}function y(e,t,r){var a,i=e.displaypropertiesid,n=r.resources.pbmetallicdisplayproperties;if(null!==i&&void 0!==n[i]){var o=n[i].data[e.index];a=new THREE.MeshStandardMaterial({flatShading:!0,roughness:o.roughness,metalness:o.metallicness})}else a=new THREE.MeshPhongMaterial({flatShading:!0});a.name=e.name;var s=e.displaycolor,u=s.substring(0,7);return a.color.setStyle(u),a.color.convertSRGBToLinear(),9===s.length&&(a.opacity=parseInt(s.charAt(7)+s.charAt(8),16)/255),a}function T(e,t,r,a){for(var i=new THREE.Group,n=0;n<e.length;n++){var o=e[n],s=t[o.objectId];void 0===s&&(R(o.objectId,t,r,a),s=t[o.objectId]);var u=s.clone(),l=o.transform;l&&u.applyMatrix4(l),i.add(u)}return i}function R(e,r,a,i){var n=a.resources.object[e];if(n.mesh){var o=n.mesh;!function(e,r,a){if(e){for(var i=[],n=Object.keys(e),o=0;o<n.length;o++)for(var s=n[o],u=0;u<t.availableExtensions.length;u++)(l=t.availableExtensions[u]).ns===s&&i.push(l);for(o=0;o<i.length;o++){var l;(l=i[o]).apply(a,e[l.ns],r)}}}(a.extensions,o,a.xml),r[n.id]=A(o,r,a,i,n,m)}else{var s=n.components;r[n.id]=A(s,r,a,i,n,T)}}var w=function(e){var t,r,i,n,o=null,s=null,u=[],l=[],p=[],c=[],h={},v={};try{o=new JSZip(e)}catch(e){if(e instanceof ReferenceError)return console.error("THREE.3MFLoader: jszip missing and file is compressed."),null}for(s in o.files)s.match(/\_rels\/.rels$/)?t=s:s.match(/3D\/_rels\/.*\.model\.rels$/)?r=s:s.match(/^3D\/.*\.model$/)?u.push(s):s.match(/^3D\/Metadata\/.*\.xml$/)?l.push(s):s.match(/^3D\/Textures?\/.*/)?p.push(s):s.match(/^3D\/Other\/.*/)&&c.push(s);var g=new Uint8Array(o.file(t).asArrayBuffer());i=a(THREE.LoaderUtils.decodeText(g)),r&&(g=new Uint8Array(o.file(r).asArrayBuffer()),n=a(THREE.LoaderUtils.decodeText(g)));for(var f=0;f<u.length;f++){var b=u[f],E=new Uint8Array(o.file(b).asArrayBuffer()),m=THREE.LoaderUtils.decodeText(E),A=(new DOMParser).parseFromString(m,"application/xml");"model"!==A.documentElement.nodeName.toLowerCase()&&console.error("THREE.3MFLoader: Error loading 3MF - no 3MF document found: ",b);var y=A.querySelector("model"),T={};for(f=0;f<y.attributes.length;f++){var R=y.attributes[f];R.name.match(/^xmlns:(.+)$/)&&(T[R.value]=RegExp.$1)}var w=d(y);w.xml=y,0<Object.keys(T).length&&(w.extensions=T),h[b]=w}for(f=0;f<p.length;f++){var H=p[f];v[H]=o.file(H).asArrayBuffer()}return{rels:i,modelRels:n,model:h,printTicket:{},texture:v,other:{}}}(e),H=function(e){var t=e.model,r=e.modelRels,a={},i=Object.keys(t),n={};if(r)for(var o=0,s=r.length;o<s;o++){var u=r[o],l=u.target.substring(1);e.texture[l]&&(n[u.target]=e.texture[l])}for(o=0;o<i.length;o++)for(var p=t[i[o]],c=Object.keys(p.resources.object),d=0;d<c.length;d++)R(c[d],a,p,n);return a}(w);return function(e,t){for(var r=new THREE.Group,a=t.rels[0],i=t.model[a.target.substring(1)].build,n=0;n<i.length;n++){var o=i[n],s=e[o.objectId],u=o.transform;u&&s.applyMatrix4(u),r.add(s)}return r}(H,w)},addExtension:function(e){this.availableExtensions.push(e)}});
//# sourceMappingURL=/sm/b53a20338f98c9ea552dcdba7b1c7f22e7bf19c429d2d951015b10c21fe3cfa6.map
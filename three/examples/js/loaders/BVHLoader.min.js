/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/js/loaders/BVHLoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
console.warn("THREE.BVHLoader: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),THREE.BVHLoader=function(e){THREE.Loader.call(this,e),this.animateBonePositions=!0,this.animateBoneRotations=!0},THREE.BVHLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.BVHLoader,load:function(e,o,t,r){var a=this,n=new THREE.FileLoader(a.manager);n.setPath(a.path),n.load(e,function(t){try{o(a.parse(t))}catch(o){r?r(o):console.error(o),a.manager.itemError(e)}},t,r)},parse:function(e){function o(e,t,r){if("ENDSITE"!==r.type){var a={time:t,position:new THREE.Vector3,rotation:new THREE.Quaternion};r.frames.push(a);for(var n=new THREE.Quaternion,i=new THREE.Vector3(1,0,0),s=new THREE.Vector3(0,1,0),E=new THREE.Vector3(0,0,1),p=0;p<r.channels.length;p++)switch(r.channels[p]){case"Xposition":a.position.x=parseFloat(e.shift().trim());break;case"Yposition":a.position.y=parseFloat(e.shift().trim());break;case"Zposition":a.position.z=parseFloat(e.shift().trim());break;case"Xrotation":n.setFromAxisAngle(i,parseFloat(e.shift().trim())*Math.PI/180),a.rotation.multiply(n);break;case"Yrotation":n.setFromAxisAngle(s,parseFloat(e.shift().trim())*Math.PI/180),a.rotation.multiply(n);break;case"Zrotation":n.setFromAxisAngle(E,parseFloat(e.shift().trim())*Math.PI/180),a.rotation.multiply(n);break;default:console.warn("THREE.BVHLoader: Invalid channel type.")}for(p=0;p<r.children.length;p++)o(e,t,r.children[p])}}function t(e){for(var o;0===(o=e.shift().trim()).length;);return o}var r=this,a=function(e){"HIERARCHY"!==t(e)&&console.error("THREE.BVHLoader: HIERARCHY expected.");var r=[],a=function e(o,r,a){var n={name:"",type:"",frames:[]};a.push(n);var i=r.split(/[\s]+/);"END"===i[0].toUpperCase()&&"SITE"===i[1].toUpperCase()?(n.type="ENDSITE",n.name="ENDSITE"):(n.name=i[1],n.type=i[0].toUpperCase()),"{"!==t(o)&&console.error("THREE.BVHLoader: Expected opening { after type & name"),"OFFSET"!==(i=t(o).split(/[\s]+/))[0]&&console.error("THREE.BVHLoader: Expected OFFSET but got: "+i[0]),4!==i.length&&console.error("THREE.BVHLoader: Invalid number of values for OFFSET.");var s=new THREE.Vector3(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]));if((isNaN(s.x)||isNaN(s.y)||isNaN(s.z))&&console.error("THREE.BVHLoader: Invalid values of OFFSET."),n.offset=s,"ENDSITE"!==n.type){"CHANNELS"!==(i=t(o).split(/[\s]+/))[0]&&console.error("THREE.BVHLoader: Expected CHANNELS definition.");var E=parseInt(i[1]);n.channels=i.splice(2,E),n.children=[]}for(;;){var p=t(o);if("}"===p)return n;n.children.push(e(o,p,a))}}(e,t(e),r);"MOTION"!==t(e)&&console.error("THREE.BVHLoader: MOTION expected.");var n=t(e).split(/[\s]+/),i=parseInt(n[1]);isNaN(i)&&console.error("THREE.BVHLoader: Failed to read number of frames."),n=t(e).split(/[\s]+/);var s=parseFloat(n[2]);isNaN(s)&&console.error("THREE.BVHLoader: Failed to read frame time.");for(var E=0;E<i;E++)o(n=t(e).split(/[\s]+/),E*s,a);return r}(e.split(/[\r\n]+/g)),n=[];!function e(o,t){var r=new THREE.Bone;if(t.push(r),r.position.add(o.offset),r.name=o.name,"ENDSITE"!==o.type)for(var a=0;a<o.children.length;a++)r.add(e(o.children[a],t));return r}(a[0],n);var i=function(e){for(var o=[],t=0;t<e.length;t++){var a=e[t];if("ENDSITE"!==a.type){for(var n=[],i=[],s=[],E=0;E<a.frames.length;E++){var p=a.frames[E];n.push(p.time),i.push(p.position.x+a.offset.x),i.push(p.position.y+a.offset.y),i.push(p.position.z+a.offset.z),s.push(p.rotation.x),s.push(p.rotation.y),s.push(p.rotation.z),s.push(p.rotation.w)}r.animateBonePositions&&o.push(new THREE.VectorKeyframeTrack(".bones["+a.name+"].position",n,i)),r.animateBoneRotations&&o.push(new THREE.QuaternionKeyframeTrack(".bones["+a.name+"].quaternion",n,s))}}return new THREE.AnimationClip("animation",-1,o)}(a);return{skeleton:new THREE.Skeleton(n),clip:i}}});
//# sourceMappingURL=/sm/1353af0bbee991499a002f3ab0fe4df9728b82248b1974e96d4ec28a2d0685ca.map
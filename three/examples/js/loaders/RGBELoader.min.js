/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/js/loaders/RGBELoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
console.warn("THREE.RGBELoader: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/index.html#manual/en/introduction/Import-via-modules."),THREE.RGBELoader=function(e){THREE.DataTextureLoader.call(this,e),this.type=THREE.UnsignedByteType},THREE.RGBELoader.prototype=Object.assign(Object.create(THREE.DataTextureLoader.prototype),{constructor:THREE.RGBELoader,parse:function(e){var r=function(e,r){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(r||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(r||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(r||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(r||""))}return-1},t=function(e,r,t){r=r||1024;for(var a=e.pos,n=-1,i=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(a,a+128)));0>(n=s.indexOf("\n"))&&i<r&&a<e.byteLength;)o+=s,i+=s.length,a+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(a,a+128)));return-1<n&&(!1!==t&&(e.pos+=i+n+1),o+s.slice(0,n))},a=function(){var e=new Float32Array(1),r=new Int32Array(e.buffer);function t(t){e[0]=t;var a=r[0],n=a>>16&32768,i=a>>12&2047,o=a>>23&255;return o<103?n:o>142?(n|=31744,n|=(255==o?0:1)&&8388607&a):o<113?n|=((i|=2048)>>114-o)+(i>>113-o&1):(n|=o-112<<10|i>>1,n+=1&i)}return function(e,r,a,n){var i=e[r+3],o=Math.pow(2,i-128)/255;a[n+0]=t(e[r+0]*o),a[n+1]=t(e[r+1]*o),a[n+2]=t(e[r+2]*o)}}(),n=new Uint8Array(e);n.pos=0;var i,o,s,E,l,d,p=function(e){var a,n,i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,E=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,l={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(a=t(e)))return r(1,"no header found");if(!(n=a.match(/^#\?(\S+)$/)))return r(3,"bad initial token");for(l.valid|=1,l.programtype=n[1],l.string+=a+"\n";!1!==(a=t(e));)if(l.string+=a+"\n","#"!==a.charAt(0)){if((n=a.match(i))&&(l.gamma=parseFloat(n[1],10)),(n=a.match(o))&&(l.exposure=parseFloat(n[1],10)),(n=a.match(s))&&(l.valid|=2,l.format=n[1]),(n=a.match(E))&&(l.valid|=4,l.height=parseInt(n[1],10),l.width=parseInt(n[2],10)),2&l.valid&&4&l.valid)break}else l.comments+=a+"\n";return 2&l.valid?4&l.valid?l:r(3,"missing image size specifier"):r(3,"missing format specifier")}(n);if(-1!==p){var c=p.width,u=p.height,f=function(e,t,a){var n,i,o,s,E,l,d,p,c,u,f,y,h,R=t,m=a;if(R<8||R>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(R!==(e[2]<<8|e[3]))return r(3,"wrong scanline width");if(!(n=new Uint8Array(4*t*a)).length)return r(4,"unable to allocate buffer space");for(i=0,o=0,p=4*R,h=new Uint8Array(4),l=new Uint8Array(p);m>0&&o<e.byteLength;){if(o+4>e.byteLength)return r(1);if(h[0]=e[o++],h[1]=e[o++],h[2]=e[o++],h[3]=e[o++],2!=h[0]||2!=h[1]||(h[2]<<8|h[3])!=R)return r(3,"bad rgbe scanline format");for(d=0;d<p&&o<e.byteLength;){if((y=(s=e[o++])>128)&&(s-=128),0===s||d+s>p)return r(3,"bad scanline data");if(y)for(E=e[o++],c=0;c<s;c++)l[d++]=E;else l.set(e.subarray(o,o+s),d),d+=s,o+=s}for(u=R,c=0;c<u;c++)f=0,n[i]=l[c+f],f+=R,n[i+1]=l[c+f],f+=R,n[i+2]=l[c+f],f+=R,n[i+3]=l[c+f],i+=4;m--}return n}(n.subarray(n.pos),c,u);if(-1!==f){switch(this.type){case THREE.UnsignedByteType:var y=f,h=THREE.RGBEFormat,R=THREE.UnsignedByteType;break;case THREE.FloatType:for(var m=f.length/4*3,g=new Float32Array(m),T=0;T<m;T++)s=g,E=3*T,l=void 0,d=void 0,l=(i=f)[(o=4*T)+3],d=Math.pow(2,l-128)/255,s[E+0]=i[o+0]*d,s[E+1]=i[o+1]*d,s[E+2]=i[o+2]*d;y=g,h=THREE.RGBFormat,R=THREE.FloatType;break;case THREE.HalfFloatType:m=f.length/4*3;var H=new Uint16Array(m);for(T=0;T<m;T++)a(f,4*T,H,3*T);y=H,h=THREE.RGBFormat,R=THREE.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:c,height:u,data:y,header:p.string,gamma:p.gamma,exposure:p.exposure,format:h,type:R}}}return null},setDataType:function(e){return this.type=e,this},load:function(e,r,t,a){return THREE.DataTextureLoader.prototype.load.call(this,e,function(e,t){switch(e.type){case THREE.UnsignedByteType:e.encoding=THREE.RGBEEncoding,e.minFilter=THREE.NearestFilter,e.magFilter=THREE.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case THREE.FloatType:case THREE.HalfFloatType:e.encoding=THREE.LinearEncoding,e.minFilter=THREE.LinearFilter,e.magFilter=THREE.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}r&&r(e,t)},t,a)}});
//# sourceMappingURL=/sm/773ff77c7211ac5d3e11cb85e2fa8963605655f8d4093add6435ba9a1d7ff551.map
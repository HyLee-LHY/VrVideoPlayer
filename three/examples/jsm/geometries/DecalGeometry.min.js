/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/geometries/DecalGeometry.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{BufferGeometry,Float32BufferAttribute,Matrix4,Vector3}from"../../../build/three.module.js";var DecalGeometry=function(t,o,e,r){BufferGeometry.call(this);var n=[],i=[],s=[],u=new Vector3,p=new Matrix4;p.makeRotationFromEuler(e),p.setPosition(o);var a=(new Matrix4).getInverse(p);function l(o,e,r){e.applyMatrix4(t.matrixWorld),e.applyMatrix4(a),r.transformDirection(t.matrixWorld),o.push(new DecalVertex(e.clone(),r.clone()))}function c(t,o){for(var e=[],n=.5*Math.abs(r.dot(o)),i=0;i<t.length;i+=3){var s,u,p,a,l,c,m;switch(((s=t[i+0].position.dot(o)-n>0)?1:0)+((u=t[i+1].position.dot(o)-n>0)?1:0)+((p=t[i+2].position.dot(o)-n>0)?1:0)){case 0:e.push(t[i]),e.push(t[i+1]),e.push(t[i+2]);break;case 1:if(s&&(a=t[i+1],l=t[i+2],c=f(t[i],a,o,n),m=f(t[i],l,o,n)),u){a=t[i],l=t[i+2],c=f(t[i+1],a,o,n),m=f(t[i+1],l,o,n),e.push(c),e.push(l.clone()),e.push(a.clone()),e.push(l.clone()),e.push(c.clone()),e.push(m);break}p&&(a=t[i],l=t[i+1],c=f(t[i+2],a,o,n),m=f(t[i+2],l,o,n)),e.push(a.clone()),e.push(l.clone()),e.push(c),e.push(m),e.push(c.clone()),e.push(l.clone());break;case 2:s||(l=f(a=t[i].clone(),t[i+1],o,n),c=f(a,t[i+2],o,n),e.push(a),e.push(l),e.push(c)),u||(l=f(a=t[i+1].clone(),t[i+2],o,n),c=f(a,t[i],o,n),e.push(a),e.push(l),e.push(c)),p||(l=f(a=t[i+2].clone(),t[i],o,n),c=f(a,t[i+1],o,n),e.push(a),e.push(l),e.push(c))}}return e}function f(t,o,e,r){var n=t.position.dot(e)-r,i=n/(n-(o.position.dot(e)-r));return new DecalVertex(new Vector3(t.position.x+i*(o.position.x-t.position.x),t.position.y+i*(o.position.y-t.position.y),t.position.z+i*(o.position.z-t.position.z)),new Vector3(t.normal.x+i*(o.normal.x-t.normal.x),t.normal.y+i*(o.normal.y-t.normal.y),t.normal.z+i*(o.normal.z-t.normal.z)))}!function(){var o,e=new BufferGeometry,a=[],f=new Vector3,m=new Vector3;t.geometry.isGeometry?e.fromGeometry(t.geometry):e.copy(t.geometry);var h=e.attributes.position,y=e.attributes.normal;if(null!==e.index){var x=e.index;for(o=0;o<x.count;o++)f.fromBufferAttribute(h,x.getX(o)),m.fromBufferAttribute(y,x.getX(o)),l(a,f,m)}else for(o=0;o<h.count;o++)f.fromBufferAttribute(h,o),m.fromBufferAttribute(y,o),l(a,f,m);for(a=c(a,u.set(1,0,0)),a=c(a,u.set(-1,0,0)),a=c(a,u.set(0,1,0)),a=c(a,u.set(0,-1,0)),a=c(a,u.set(0,0,1)),a=c(a,u.set(0,0,-1)),o=0;o<a.length;o++){var b=a[o];s.push(.5+b.position.x/r.x,.5+b.position.y/r.y),b.position.applyMatrix4(p),n.push(b.position.x,b.position.y,b.position.z),i.push(b.normal.x,b.normal.y,b.normal.z)}}(),this.setAttribute("position",new Float32BufferAttribute(n,3)),this.setAttribute("normal",new Float32BufferAttribute(i,3)),this.setAttribute("uv",new Float32BufferAttribute(s,2))};DecalGeometry.prototype=Object.create(BufferGeometry.prototype),DecalGeometry.prototype.constructor=DecalGeometry;var DecalVertex=function(t,o){this.position=t,this.normal=o};DecalVertex.prototype.clone=function(){return new this.constructor(this.position.clone(),this.normal.clone())};export{DecalGeometry,DecalVertex};
//# sourceMappingURL=/sm/c59d53c819bf8739d755f7b766dcb0be4c040f97f7663e5b4ba345b474561534.map
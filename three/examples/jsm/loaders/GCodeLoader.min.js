/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/loaders/GCodeLoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{BufferGeometry,Euler,FileLoader,Float32BufferAttribute,Group,LineBasicMaterial,LineSegments,Loader}from"../../../build/three.module.js";var GCodeLoader=function(e){Loader.call(this,e),this.splitLayer=!1};GCodeLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:GCodeLoader,load:function(e,r,t,o){var a=this,i=new FileLoader(a.manager);i.setPath(a.path),i.load(e,function(t){try{r(a.parse(t))}catch(r){o?o(r):console.error(r),a.manager.itemError(e)}},t,o)},parse:function(e){var r={x:0,y:0,z:0,e:0,f:0,extruding:!1,relative:!1},t=[],o=void 0,a=new LineBasicMaterial({color:16711680});a.name="path";var i=new LineBasicMaterial({color:65280});function n(e){o={vertex:[],pathVertex:[],z:e.z},t.push(o)}function l(e,t){return r.relative?t:t-e}function s(e,t){return r.relative?e+t:t}i.name="extruded";for(var u,d,f=e.replace(/;.+/g,"").split("\n"),v=0;v<f.length;v++){var p=f[v].split(" "),x=p[0].toUpperCase(),h={};if(p.splice(1).forEach(function(e){if(void 0!==e[0]){var r=e[0].toLowerCase(),t=parseFloat(e.substring(1));h[r]=t}}),"G0"===x||"G1"===x){var c={x:void 0!==h.x?s(r.x,h.x):r.x,y:void 0!==h.y?s(r.y,h.y):r.y,z:void 0!==h.z?s(r.z,h.z):r.z,e:void 0!==h.e?s(r.e,h.e):r.e,f:void 0!==h.f?s(r.f,h.f):r.f};l(r.e,c.e)>0&&(c.extruding=l(r.e,c.e)>0,null!=o&&c.z==o.z||n(c)),u=r,d=c,void 0===o&&n(u),c.extruding?(o.vertex.push(u.x,u.y,u.z),o.vertex.push(d.x,d.y,d.z)):(o.pathVertex.push(u.x,u.y,u.z),o.pathVertex.push(d.x,d.y,d.z)),r=c}else if("G2"===x||"G3"===x);else if("G90"===x)r.relative=!1;else if("G91"===x)r.relative=!0;else if("G92"===x){(c=r).x=void 0!==h.x?h.x:c.x,c.y=void 0!==h.y?h.y:c.y,c.z=void 0!==h.z?h.z:c.z,c.e=void 0!==h.e?h.e:c.e,r=c}}function y(e,r){var t=new BufferGeometry;t.setAttribute("position",new Float32BufferAttribute(e,3));var o=new LineSegments(t,r?i:a);o.name="layer"+v,z.add(o)}var z=new Group;if(z.name="gcode",this.splitLayer)for(v=0;v<t.length;v++){y((m=t[v]).vertex,!0),y(m.pathVertex,!1)}else{var L=[],g=[];for(v=0;v<t.length;v++){for(var m,G=(m=t[v]).vertex,w=m.pathVertex,b=0;b<G.length;b++)L.push(G[b]);for(b=0;b<w.length;b++)g.push(w[b])}y(L,!0),y(g,!1)}return z.quaternion.setFromEuler(new Euler(-Math.PI/2,0,0)),z}});export{GCodeLoader};
//# sourceMappingURL=/sm/26ebf663ebdb1733659655597c4067ab9effad0924e6aa44beb2af397b4c1d32.map
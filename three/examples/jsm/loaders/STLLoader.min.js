/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/loaders/STLLoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{BufferAttribute,BufferGeometry,FileLoader,Float32BufferAttribute,Loader,LoaderUtils,Vector3}from"../../../build/three.module.js";var STLLoader=function(e){Loader.call(this,e)};STLLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:STLLoader,load:function(e,t,r,o){var a=this,n=new FileLoader(a.manager);n.setPath(a.path),n.setResponseType("arraybuffer"),n.load(e,function(r){try{t(a.parse(r))}catch(t){o?o(t):console.error(t),a.manager.itemError(e)}},r,o)},parse:function(e){function t(e,t,r){for(var o=0,a=e.length;o<a;o++)if(e[o]!==t.getUint8(r+o,!1))return!1;return!0}var r,o=function(e){if("string"==typeof e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer||t}return e}(e);return function(e){var r;if(84+50*(r=new DataView(e)).getUint32(80,!0)===r.byteLength)return!0;for(var o=[115,111,108,105,100],a=0;a<5;a++)if(t(o,r,a))return!1;return!0}(o)?function(e){for(var t,r,o,a,n,i,f,u,l=new DataView(e),s=l.getUint32(80,!0),g=!1,c=0;c<70;c++)1129270351==l.getUint32(c,!1)&&82==l.getUint8(c+4)&&61==l.getUint8(c+5)&&(g=!0,a=new Float32Array(3*s*3),n=l.getUint8(c+6)/255,i=l.getUint8(c+7)/255,f=l.getUint8(c+8)/255,u=l.getUint8(c+9)/255);for(var d=new BufferGeometry,p=new Float32Array(3*s*3),h=new Float32Array(3*s*3),w=0;w<s;w++){var b=84+50*w,F=l.getFloat32(b,!0),L=l.getFloat32(b+4,!0),v=l.getFloat32(b+8,!0);if(g){var y=l.getUint16(b+48,!0);0==(32768&y)?(t=(31&y)/31,r=(y>>5&31)/31,o=(y>>10&31)/31):(t=n,r=i,o=f)}for(var A=1;A<=3;A++){var m=b+12*A,U=3*w*3+3*(A-1);p[U]=l.getFloat32(m,!0),p[U+1]=l.getFloat32(m+4,!0),p[U+2]=l.getFloat32(m+8,!0),h[U]=F,h[U+1]=L,h[U+2]=v,g&&(a[U]=t,a[U+1]=r,a[U+2]=o)}}return d.setAttribute("position",new BufferAttribute(p,3)),d.setAttribute("normal",new BufferAttribute(h,3)),g&&(d.setAttribute("color",new BufferAttribute(a,3)),d.hasColors=!0,d.alpha=u),d}(o):function(e){for(var t,r=new BufferGeometry,o=/solid([\s\S]*?)endsolid/g,a=/facet([\s\S]*?)endfacet/g,n=0,i=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,f=new RegExp("vertex"+i+i+i,"g"),u=new RegExp("normal"+i+i+i,"g"),l=[],s=[],g=new Vector3,c=0,d=0,p=0;null!==(t=o.exec(e));){d=p;for(var h=t[0];null!==(t=a.exec(h));){for(var w=0,b=0,F=t[0];null!==(t=u.exec(F));)g.x=parseFloat(t[1]),g.y=parseFloat(t[2]),g.z=parseFloat(t[3]),b++;for(;null!==(t=f.exec(F));)l.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),s.push(g.x,g.y,g.z),w++,p++;1!==b&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+n),3!==w&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+n),n++}var L=d,v=p-d;r.addGroup(L,v,c),c++}return r.setAttribute("position",new Float32BufferAttribute(l,3)),r.setAttribute("normal",new Float32BufferAttribute(s,3)),r}("string"!=typeof(r=e)?LoaderUtils.decodeText(new Uint8Array(r)):r)}});export{STLLoader};
//# sourceMappingURL=/sm/aaf65b13bb87c00f81bbbdbb5ead4d02023b09973073376aea73303839ab44a2.map
/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/loaders/KMZLoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{FileLoader,Group,Loader,LoadingManager}from"../../../build/three.module.js";import{ColladaLoader}from"../loaders/ColladaLoader.js";import{JSZip}from"../libs/jszip.module.min.js";var KMZLoader=function(e){Loader.call(this,e)};KMZLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:KMZLoader,load:function(e,r,o,a){var t=this,n=new FileLoader(t.manager);n.setPath(t.path),n.setResponseType("arraybuffer"),n.load(e,function(o){try{r(t.parse(o))}catch(r){a?a(r):console.error(r),t.manager.itemError(e)}},o,a)},parse:function(e){var r=new LoadingManager;r.setURLModifier(function(e){var r=function(e){for(var r in o.files)if(r.substr(-e.length)===e)return o.files[r]}(e);if(r){console.log("Loading",e);var a=new Blob([r.asArrayBuffer()],{type:"application/octet-stream"});return URL.createObjectURL(a)}return e});var o=new JSZip(e);if(o.files["doc.kml"]){var a=(new DOMParser).parseFromString(o.files["doc.kml"].asText(),"application/xml").querySelector("Placemark Model Link href");if(a)return new ColladaLoader(r).parse(o.files[a.textContent].asText())}else for(var t in console.warn("KMZLoader: Missing doc.kml file."),o.files){if("dae"===t.split(".").pop().toLowerCase())return new ColladaLoader(r).parse(o.files[t].asText())}return console.error("KMZLoader: Couldn't find .dae file."),{scene:new Group}}});export{KMZLoader};
//# sourceMappingURL=/sm/79fb59f1fd69720055d62c9da72dd68c6ffb934b330398537a0065c8624a2e1f.map
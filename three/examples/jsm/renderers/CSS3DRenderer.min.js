/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/renderers/CSS3DRenderer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Matrix4,Object3D,Vector3}from"../../../build/three.module.js";var CSS3DObject=function(e){Object3D.call(this),this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype),CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(e){CSS3DObject.call(this,e)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype),CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var e,t,r,n,a=this,o=new Matrix4,i={camera:{fov:0,style:""},objects:new WeakMap},s=document.createElement("div");s.style.overflow="hidden",this.domElement=s;var l=document.createElement("div");l.style.WebkitTransformStyle="preserve-3d",l.style.transformStyle="preserve-3d",l.style.pointerEvents="none",s.appendChild(l);var c=/Trident/i.test(navigator.userAgent);function p(e){return Math.abs(e)<1e-10?0:e}function d(e){var t=e.elements;return"matrix3d("+p(t[0])+","+p(-t[1])+","+p(t[2])+","+p(t[3])+","+p(t[4])+","+p(-t[5])+","+p(t[6])+","+p(t[7])+","+p(t[8])+","+p(-t[9])+","+p(t[10])+","+p(t[11])+","+p(t[12])+","+p(-t[13])+","+p(t[14])+","+p(t[15])+")"}function m(e,t){var a=e.elements,o="matrix3d("+p(a[0])+","+p(a[1])+","+p(a[2])+","+p(a[3])+","+p(-a[4])+","+p(-a[5])+","+p(-a[6])+","+p(-a[7])+","+p(a[8])+","+p(a[9])+","+p(a[10])+","+p(a[11])+","+p(a[12])+","+p(a[13])+","+p(a[14])+","+p(a[15])+")";return c?"translate(-50%,-50%)translate("+r+"px,"+n+"px)"+t+o:"translate(-50%,-50%)"+o}this.getSize=function(){return{width:e,height:t}},this.setSize=function(a,o){r=(e=a)/2,n=(t=o)/2,s.style.width=a+"px",s.style.height=o+"px",l.style.width=a+"px",l.style.height=o+"px"};var S,v,u=(S=new Vector3,v=new Vector3,function(e,t){return S.setFromMatrixPosition(e.matrixWorld),v.setFromMatrixPosition(t.matrixWorld),S.distanceToSquared(v)});function f(e){for(var t=function(e){var t=[];return e.traverse(function(e){e instanceof CSS3DObject&&t.push(e)}),t}(e).sort(function(e,t){return i.objects.get(e).distanceToCameraSquared-i.objects.get(t).distanceToCameraSquared}),r=t.length,n=0,a=t.length;n<a;n++)t[n].element.style.zIndex=r-n}this.render=function(e,t){var S=t.projectionMatrix.elements[5]*n;if(i.camera.fov!==S&&(t.isPerspectiveCamera?(s.style.WebkitPerspective=S+"px",s.style.perspective=S+"px"):(s.style.WebkitPerspective="",s.style.perspective=""),i.camera.fov=S),!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.isOrthographicCamera)var v=-(t.right+t.left)/2,h=(t.top+t.bottom)/2;var y=t.isOrthographicCamera?"scale("+S+")translate("+p(v)+"px,"+p(h)+"px)"+d(t.matrixWorldInverse):"translateZ("+S+"px)"+d(t.matrixWorldInverse),x=y+"translate("+r+"px,"+n+"px)";i.camera.style===x||c||(l.style.WebkitTransform=x,l.style.transform=x,i.camera.style=x),function e(t,r,n,s){if(t instanceof CSS3DObject){var p;t.onBeforeRender(a,r,n),t instanceof CSS3DSprite?(o.copy(n.matrixWorldInverse),o.transpose(),o.copyPosition(t.matrixWorld),o.scale(t.scale),o.elements[3]=0,o.elements[7]=0,o.elements[11]=0,o.elements[15]=1,p=m(o,s)):p=m(t.matrixWorld,s);var d=t.element,S=i.objects.get(t);if(void 0===S||S.style!==p){d.style.WebkitTransform=p,d.style.transform=p;var v={style:p};c&&(v.distanceToCameraSquared=u(n,t)),i.objects.set(t,v)}d.style.display=t.visible?"":"none",d.parentNode!==l&&l.appendChild(d),t.onAfterRender(a,r,n)}for(var f=0,h=t.children.length;f<h;f++)e(t.children[f],r,n,s)}(e,e,t,y),c&&f(e)}};export{CSS3DObject,CSS3DSprite,CSS3DRenderer};
//# sourceMappingURL=/sm/8eb7e3bf3d78b7d2fd6b0225f72fe30eb7b0fb23a5ff48991d151974d0a5e178.map
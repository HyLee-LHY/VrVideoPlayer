/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/renderers/SVGRenderer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Box2,Camera,Color,Matrix3,Matrix4,Object3D,Vector3}from"../../../build/three.module.js";import{Projector}from"../renderers/Projector.js";import{RenderableFace}from"../renderers/Projector.js";import{RenderableLine}from"../renderers/Projector.js";import{RenderableSprite}from"../renderers/Projector.js";var SVGObject=function(e){Object3D.call(this),this.node=e};SVGObject.prototype=Object.create(Object3D.prototype),SVGObject.prototype.constructor=SVGObject;var SVGRenderer=function(){var e,t,i,r,o,n,s,a,c,l,p,d,f,h=this,S=new Projector,m=document.createElementNS("http://www.w3.org/2000/svg","svg"),u=new Box2,y=new Box2,x=new Color,v=new Color,b=new Color,g=new Color,w=new Color,M=new Color,j=new Vector3,C=new Vector3,z=new Vector3,P=new Matrix3,L=new Matrix4,k=new Matrix4,R=[],V=0,G=1,B=null;function O(){for(V=0;m.childNodes.length>0;)m.removeChild(m.childNodes[0])}function E(e){return null!==B?e.toFixed(B):e}function A(e,t,i){var r=t.scale.x*n,o=t.scale.y*s;i.isPointsMaterial&&(r*=i.size,o*=i.size);var a="M"+E(e.x-.5*r)+","+E(e.y-.5*o)+"h"+E(r)+"v"+E(o)+"h"+E(-r)+"z",c="";(i.isSpriteMaterial||i.isPointsMaterial)&&(c="fill:"+i.color.getStyle()+";fill-opacity:"+i.opacity),N(c,a)}function F(e,t,i,r){var o="M"+E(e.positionScreen.x)+","+E(e.positionScreen.y)+"L"+E(t.positionScreen.x)+","+E(t.positionScreen.y);if(r.isLineBasicMaterial){var n="fill:none;stroke:"+r.color.getStyle()+";stroke-opacity:"+r.opacity+";stroke-width:"+r.linewidth+";stroke-linecap:"+r.linecap;r.isLineDashedMaterial&&(n=n+";stroke-dasharray:"+r.dashSize+","+r.gapSize),N(n,o)}}function W(e,t,r,o,n){h.info.render.vertices+=3,h.info.render.faces++;var s="M"+E(e.positionScreen.x)+","+E(e.positionScreen.y)+"L"+E(t.positionScreen.x)+","+E(t.positionScreen.y)+"L"+E(r.positionScreen.x)+","+E(r.positionScreen.y)+"z";n.isMeshBasicMaterial?(x.copy(n.color),n.vertexColors&&x.multiply(o.color)):n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial?(v.copy(n.color),n.vertexColors&&v.multiply(o.color),x.copy(b),C.copy(e.positionWorld).add(t.positionWorld).add(r.positionWorld).divideScalar(3),function(e,t,i,r){for(var o=0,n=e.length;o<n;o++){var s=e[o],a=s.color;if(s.isDirectionalLight){var c=j.setFromMatrixPosition(s.matrixWorld).normalize();if((l=i.dot(c))<=0)continue;l*=s.intensity,r.r+=a.r*l,r.g+=a.g*l,r.b+=a.b*l}else if(s.isPointLight){var l;if(c=j.setFromMatrixPosition(s.matrixWorld),(l=i.dot(j.subVectors(c,t).normalize()))<=0)continue;if(0==(l*=0==s.distance?1:1-Math.min(t.distanceTo(c)/s.distance,1)))continue;l*=s.intensity,r.r+=a.r*l,r.g+=a.g*l,r.b+=a.b*l}}}(i,C,o.normalModel,x),x.multiply(v).add(n.emissive)):n.isMeshNormalMaterial&&(z.copy(o.normalModel).applyMatrix3(P).normalize(),x.setRGB(z.x,z.y,z.z).multiplyScalar(.5).addScalar(.5)),N(n.wireframe?"fill:none;stroke:"+x.getStyle()+";stroke-opacity:"+n.opacity+";stroke-width:"+n.wireframeLinewidth+";stroke-linecap:"+n.wireframeLinecap+";stroke-linejoin:"+n.wireframeLinejoin:"fill:"+x.getStyle()+";fill-opacity:"+n.opacity,s)}function D(e,t,i){var r,o=t.x-e.x,n=t.y-e.y,s=o*o+n*n;0!==s&&(o*=r=i/Math.sqrt(s),n*=r,t.x+=o,t.y+=n,e.x-=o,e.y-=n)}function N(e,t){f===e?d+=t:(I(),f=e,d=t)}function I(){d&&((p=function(e){if(null==R[e])return R[e]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==G&&R[e].setAttribute("shape-rendering","crispEdges"),R[e];return R[e]}(V++)).setAttribute("d",d),p.setAttribute("style",f),m.appendChild(p)),d="",f=""}this.domElement=m,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.overdraw=.5,this.info={render:{vertices:0,faces:0}},this.setQuality=function(e){switch(e){case"high":G=1;break;case"low":G=0}},this.setClearColor=function(e){M.set(e)},this.setPixelRatio=function(){},this.setSize=function(e,t){n=(r=e)/2,s=(o=t)/2,m.setAttribute("viewBox",-n+" "+-s+" "+r+" "+o),m.setAttribute("width",r),m.setAttribute("height",o),u.min.set(-n,-s),u.max.set(n,s)},this.setPrecision=function(e){B=e},this.clear=function(){O(),m.style.backgroundColor=M.getStyle()},this.render=function(r,o){if(o instanceof Camera!=!1){var p=r.background;p&&p.isColor?(O(),m.style.backgroundColor=p.getStyle()):!0===this.autoClear&&this.clear(),h.info.render.vertices=0,h.info.render.faces=0,L.copy(o.matrixWorldInverse),k.multiplyMatrices(o.projectionMatrix,L),e=S.projectScene(r,o,this.sortObjects,this.sortElements),t=e.elements,i=e.lights,P.getNormalMatrix(o.matrixWorldInverse),function(e){b.setRGB(0,0,0),g.setRGB(0,0,0),w.setRGB(0,0,0);for(var t=0,i=e.length;t<i;t++){var r=e[t],o=r.color;r.isAmbientLight?(b.r+=o.r,b.g+=o.g,b.b+=o.b):r.isDirectionalLight?(g.r+=o.r,g.g+=o.g,g.b+=o.b):r.isPointLight&&(w.r+=o.r,w.g+=o.g,w.b+=o.b)}}(i),d="",f="";for(var x=0,v=t.length;x<v;x++){var M=t[x],C=M.material;if(void 0!==C&&0!==C.opacity)if(y.makeEmpty(),M instanceof RenderableSprite)(a=M).x*=n,a.y*=-s,A(a,M,C);else if(M instanceof RenderableLine)a=M.v1,c=M.v2,a.positionScreen.x*=n,a.positionScreen.y*=-s,c.positionScreen.x*=n,c.positionScreen.y*=-s,y.setFromPoints([a.positionScreen,c.positionScreen]),!0===u.intersectsBox(y)&&F(a,c,M,C);else if(M instanceof RenderableFace){if(a=M.v1,c=M.v2,l=M.v3,a.positionScreen.z<-1||a.positionScreen.z>1)continue;if(c.positionScreen.z<-1||c.positionScreen.z>1)continue;if(l.positionScreen.z<-1||l.positionScreen.z>1)continue;a.positionScreen.x*=n,a.positionScreen.y*=-s,c.positionScreen.x*=n,c.positionScreen.y*=-s,l.positionScreen.x*=n,l.positionScreen.y*=-s,this.overdraw>0&&(D(a.positionScreen,c.positionScreen,this.overdraw),D(c.positionScreen,l.positionScreen,this.overdraw),D(l.positionScreen,a.positionScreen,this.overdraw)),y.setFromPoints([a.positionScreen,c.positionScreen,l.positionScreen]),!0===u.intersectsBox(y)&&W(a,c,l,M,C)}}I(),r.traverseVisible(function(e){if(e instanceof SVGObject){if(j.setFromMatrixPosition(e.matrixWorld),j.applyMatrix4(k),j.z<-1||j.z>1)return;var t=j.x*n,i=-j.y*s,r=e.node;r.setAttribute("transform","translate("+t+","+i+")"),m.appendChild(r)}})}else console.error("THREE.SVGRenderer.render: camera is not an instance of Camera.")}};export{SVGObject,SVGRenderer};
//# sourceMappingURL=/sm/6dde9e65ba2bb2c30eae7afc69a8f9d14a47f04dc98d825f859456cf3119919f.map
/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/modifiers/SubdivisionModifier.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Face3,Geometry,Vector2,Vector3}from"../../../build/three.module.js";var SubdivisionModifier=function(e){this.subdivisions=void 0===e?1:e};SubdivisionModifier.prototype.modify=function(e){(e=e.isBufferGeometry?(new Geometry).fromBufferGeometry(e):e.clone()).mergeVertices();for(var t=this.subdivisions;t-- >0;)this.smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e},function(){var e=["a","b","c"];function t(e,t,o){return o[Math.min(e,t)+"_"+Math.max(e,t)]}function o(e,t,o,r,n,a){var i,c=Math.min(e,t),s=Math.max(e,t),f=c+"_"+s;f in r?i=r[f]:(i={a:o[c],b:o[s],newEdge:null,faces:[]},r[f]=i);i.faces.push(n),a[e].edges.push(i),a[t].edges.push(i)}function r(e,t,o,r,n){e.push(new Face3(t,o,r,void 0,void 0,n))}function n(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function a(e,t,o,r){e.push([t.clone(),o.clone(),r.clone()])}SubdivisionModifier.prototype.smooth=function(i){var c,s,f,d,l,u,h,m,v,g,p,b,y,x=new Vector3,w=[];c=i.vertices,s=i.faces;var V,M,S,E,G,I,F,B,N,U,_,j,A,k,q=void 0!==(f=i.faceVertexUvs)[0]&&f[0].length>0;if(q)for(var z=0;z<f.length;z++)w.push([]);for(h in function(e,t,r,n){var a,i,c;for(a=0,i=e.length;a<i;a++)r[a]={edges:[]};for(a=0,i=t.length;a<i;a++)o((c=t[a]).a,c.b,e,n,c,r),o(c.b,c.c,e,n,c,r),o(c.c,c.a,e,n,c,r)}(c,s,g=new Array(c.length),p={}),b=[],p){for(M=p[h],S=new Vector3,G=3/8,I=1/8,2!=(F=M.faces.length)&&(G=.5,I=0),S.addVectors(M.a,M.b).multiplyScalar(G),x.set(0,0,0),z=0;z<F;z++){for(E=M.faces[z],v=0;v<3&&((V=c[E[e[v]]])===M.a||V===M.b);v++);x.add(V)}x.multiplyScalar(I),S.add(x),M.newEdge=b.length,b.push(S)}for(y=[],h=0,m=c.length;h<m;h++){for(A=c[h],3==(u=(j=g[h].edges).length)?B=3/16:u>3&&(B=3/(8*u)),N=1-u*B,U=B,u<=2&&2==u&&(N=.75,U=1/8),k=A.clone().multiplyScalar(N),x.set(0,0,0),z=0;z<u;z++)V=(_=j[z]).a!==A?_.a:_.b,x.add(V);x.multiplyScalar(U),k.add(x),y.push(k)}d=y.concat(b);var C,D,H,J,K,L,O,P=y.length;l=[];var Q=new Vector2,R=new Vector2,T=new Vector2;for(h=0,m=s.length;h<m;h++)if(r(l,C=t((E=s[h]).a,E.b,p).newEdge+P,D=t(E.b,E.c,p).newEdge+P,H=t(E.c,E.a,p).newEdge+P,E.materialIndex),r(l,E.a,C,H,E.materialIndex),r(l,E.b,D,C,E.materialIndex),r(l,E.c,H,D,E.materialIndex),q)for(z=0;z<f.length;z++)K=(J=f[z][h])[0],L=J[1],O=J[2],Q.set(n(K.x,L.x),n(K.y,L.y)),R.set(n(L.x,O.x),n(L.y,O.y)),T.set(n(K.x,O.x),n(K.y,O.y)),a(w[z],Q,R,T),a(w[z],K,Q,T),a(w[z],L,R,Q),a(w[z],O,T,R);i.vertices=d,i.faces=l,q&&(i.faceVertexUvs=w)}}();export{SubdivisionModifier};
//# sourceMappingURL=/sm/72ac56c613d99db85ccc8d6a8cb5eb97b9fde2a5bd8a276786bbe4f51201df9e.map
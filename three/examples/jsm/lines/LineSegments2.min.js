/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/lines/LineSegments2.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{InstancedInterleavedBuffer,InterleavedBufferAttribute,Line3,MathUtils,Matrix4,Mesh,Vector3,Vector4}from"../../../build/three.module.js";import{LineSegmentsGeometry}from"../lines/LineSegmentsGeometry.js";import{LineMaterial}from"../lines/LineMaterial.js";var LineSegments2=function(t,e){Mesh.call(this),this.type="LineSegments2",this.geometry=void 0!==t?t:new LineSegmentsGeometry,this.material=void 0!==e?e:new LineMaterial({color:16777215*Math.random()})};LineSegments2.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:LineSegments2,isLineSegments2:!0,computeLineDistances:function(){var t=new Vector3,e=new Vector3;return function(){for(var r=this.geometry,n=r.attributes.instanceStart,a=r.attributes.instanceEnd,i=new Float32Array(2*n.data.count),o=0,s=0,c=n.data.count;o<c;o++,s+=2)t.fromBufferAttribute(n,o),e.fromBufferAttribute(a,o),i[s]=0===s?0:i[s-1],i[s+1]=i[s]+t.distanceTo(e);var l=new InstancedInterleavedBuffer(i,2,1);return r.setAttribute("instanceDistanceStart",new InterleavedBufferAttribute(l,1,0)),r.setAttribute("instanceDistanceEnd",new InterleavedBufferAttribute(l,1,1)),this}}(),raycast:function(){var t=new Vector4,e=new Vector4,r=new Vector4,n=new Vector3,a=new Matrix4,i=new Line3,o=new Vector3;return function(s,c){null===s.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var l=s.ray,u=s.camera,m=u.projectionMatrix,f=this.geometry,p=this.material,y=p.resolution,d=p.linewidth,w=f.attributes.instanceStart,v=f.attributes.instanceEnd;l.at(1,r),r.w=1,r.applyMatrix4(u.matrixWorldInverse),r.applyMatrix4(m),r.multiplyScalar(1/r.w),r.x*=y.x/2,r.y*=y.y/2,r.z=0,n.copy(r);var x=this.matrixWorld;a.multiplyMatrices(u.matrixWorldInverse,x);for(var M=0,b=w.count;M<b;M++){t.fromBufferAttribute(w,M),e.fromBufferAttribute(v,M),t.w=1,e.w=1,t.applyMatrix4(a),e.applyMatrix4(a),t.applyMatrix4(m),e.applyMatrix4(m),t.multiplyScalar(1/t.w),e.multiplyScalar(1/e.w);var h=t.z<-1&&e.z<-1,S=t.z>1&&e.z>1;if(!h&&!S){t.x*=y.x/2,t.y*=y.y/2,e.x*=y.x/2,e.y*=y.y/2,i.start.copy(t),i.start.z=0,i.end.copy(e),i.end.z=0;var g=i.closestPointToPointParameter(n,!0);i.at(g,o);var L=MathUtils.lerp(t.z,e.z,g),A=L>=-1&&L<=1,B=n.distanceTo(o)<.5*d;if(A&&B){i.start.fromBufferAttribute(w,M),i.end.fromBufferAttribute(v,M),i.start.applyMatrix4(x),i.end.applyMatrix4(x);var V=new Vector3,I=new Vector3;l.distanceSqToSegment(i.start,i.end,I,V),c.push({point:I,pointOnLine:V,distance:l.origin.distanceTo(I),object:this,face:null,faceIndex:M,uv:null,uv2:null})}}}}}()});export{LineSegments2};
//# sourceMappingURL=/sm/7f5c0ba8daf4c04bdb88a79a213c3e1cbb0d64abc9f4df8e3505aa1c19225198.map
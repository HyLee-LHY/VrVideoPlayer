/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/lights/LightProbeGenerator.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Color,LightProbe,LinearEncoding,SphericalHarmonics3,Vector3,sRGBEncoding}from"../../../build/three.module.js";var LightProbeGenerator={fromCubeTexture:function(e){for(var r,t,a,o=0,n=new Vector3,c=new Vector3,i=new Color,s=[0,0,0,0,0,0,0,0,0],h=new SphericalHarmonics3,g=h.coefficients,l=0;l<6;l++){var b=e.image[l],d=b.width,f=b.height,w=document.createElement("canvas");w.width=d,w.height=f;var v=w.getContext("2d");v.drawImage(b,0,0,d,f);for(var m=v.getImageData(0,0,d,f),u=m.data,L=m.width,k=2/L,p=0,C=u.length;p<C;p+=4){i.setRGB(u[p]/255,u[p+1]/255,u[p+2]/255),convertColorToLinear(i,e.encoding);var x=p/4,G=(x%L+.5)*k-1,P=1-(Math.floor(x/L)+.5)*k;switch(l){case 0:n.set(-1,P,-G);break;case 1:n.set(1,P,G);break;case 2:n.set(-G,1,-P);break;case 3:n.set(-G,-1,P);break;case 4:n.set(-G,P,1);break;case 5:n.set(G,P,-1)}t=n.lengthSq(),o+=a=4/(Math.sqrt(t)*t),c.copy(n).normalize(),SphericalHarmonics3.getBasisAt(c,s);for(var R=0;R<9;R++)g[R].x+=s[R]*i.r*a,g[R].y+=s[R]*i.g*a,g[R].z+=s[R]*i.b*a}}r=4*Math.PI/o;for(R=0;R<9;R++)g[R].x*=r,g[R].y*=r,g[R].z*=r;return new LightProbe(h)},fromCubeRenderTarget:function(e,r){for(var t,a,o,n=0,c=new Vector3,i=new Vector3,s=new Color,h=[0,0,0,0,0,0,0,0,0],g=new SphericalHarmonics3,l=g.coefficients,b=0;b<6;b++){var d=r.width,f=new Uint8Array(d*d*4);e.readRenderTargetPixels(r,0,0,d,d,f,b);for(var w=2/d,v=0,m=f.length;v<m;v+=4){s.setRGB(f[v]/255,f[v+1]/255,f[v+2]/255),convertColorToLinear(s,r.texture.encoding);var u=v/4,L=(u%d+.5)*w-1,k=1-(Math.floor(u/d)+.5)*w;switch(b){case 0:c.set(1,k,-L);break;case 1:c.set(-1,k,L);break;case 2:c.set(L,1,-k);break;case 3:c.set(L,-1,k);break;case 4:c.set(L,k,1);break;case 5:c.set(-L,k,-1)}a=c.lengthSq(),n+=o=4/(Math.sqrt(a)*a),i.copy(c).normalize(),SphericalHarmonics3.getBasisAt(i,h);for(var p=0;p<9;p++)l[p].x+=h[p]*s.r*o,l[p].y+=h[p]*s.g*o,l[p].z+=h[p]*s.b*o}}t=4*Math.PI/n;for(p=0;p<9;p++)l[p].x*=t,l[p].y*=t,l[p].z*=t;return new LightProbe(g)}},convertColorToLinear=function(e,r){switch(r){case sRGBEncoding:e.convertSRGBToLinear();break;case LinearEncoding:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported encoding.")}return e};export{LightProbeGenerator};
//# sourceMappingURL=/sm/e2276c5155c2bfcbd7752f6e70fde9ad223f2b6a42aa7d6b3cbb303b165ab6b0.map
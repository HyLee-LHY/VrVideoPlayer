/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/math/MeshSurfaceSampler.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Triangle}from"../../../build/three.module.js";var MeshSurfaceSampler=function(){var t=new Triangle;function e(t){var e=t.geometry;if(!e.isBufferGeometry||3!==e.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");e.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),e=e.toNonIndexed()),this.geometry=e,this.positionAttribute=this.geometry.getAttribute("position"),this.weightAttribute=null,this.distribution=null}return e.prototype={constructor:e,setWeightAttribute:function(t){return this.weightAttribute=t?this.geometry.getAttribute(t):null,this},build:function(){for(var e=this.positionAttribute,r=this.weightAttribute,i=new Float32Array(e.count/3),o=0;o<e.count;o+=3){var n=1;r&&(n=r.getX(o)+r.getX(o+1)+r.getX(o+2)),t.a.fromBufferAttribute(e,o),t.b.fromBufferAttribute(e,o+1),t.c.fromBufferAttribute(e,o+2),n*=t.getArea(),i[o/3]=n}this.distribution=new Float32Array(e.count/3);var u=0;for(o=0;o<i.length;o++)u+=i[o],this.distribution[o]=u;return this},sample:function(t,e){var r=this.distribution[this.distribution.length-1],i=this.binarySearch(Math.random()*r);return this.sampleFace(i,t,e)},binarySearch:function(t){for(var e=this.distribution,r=0,i=e.length-1,o=-1;r<=i;){var n=Math.floor((r+i)/2);if(0===n||e[n-1]<=t&&e[n]>t){o=n;break}t<e[n]?i=n-1:r=n+1}return o},sampleFace:function(e,r,i){var o=Math.random(),n=Math.random();return o+n>1&&(o=1-o,n=1-n),t.a.fromBufferAttribute(this.positionAttribute,3*e),t.b.fromBufferAttribute(this.positionAttribute,3*e+1),t.c.fromBufferAttribute(this.positionAttribute,3*e+2),r.set(0,0,0).addScaledVector(t.a,o).addScaledVector(t.b,n).addScaledVector(t.c,1-(o+n)),t.getNormal(i),this}},e}();export{MeshSurfaceSampler};
//# sourceMappingURL=/sm/de4591675b810c1b1220382aa4b35c66eeb91723c4a1d6ce47417124d631645d.map
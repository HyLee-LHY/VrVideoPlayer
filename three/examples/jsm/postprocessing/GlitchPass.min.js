/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/postprocessing/GlitchPass.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{DataTexture,FloatType,MathUtils,RGBFormat,ShaderMaterial,UniformsUtils}from"../../../build/three.module.js";import{Pass}from"../postprocessing/Pass.js";import{DigitalGlitch}from"../shaders/DigitalGlitch.js";var GlitchPass=function(t){Pass.call(this),void 0===DigitalGlitch&&console.error("GlitchPass relies on DigitalGlitch");var a=DigitalGlitch;this.uniforms=UniformsUtils.clone(a.uniforms),null==t&&(t=64),this.uniforms.tDisp.value=this.generateHeightmap(t),this.material=new ShaderMaterial({uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.fsQuad=new Pass.FullScreenQuad(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()};GlitchPass.prototype=Object.assign(Object.create(Pass.prototype),{constructor:GlitchPass,render:function(t,a,i){this.uniforms.tDiffuse.value=i.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=MathUtils.randFloat(-1,1),this.uniforms.seed_y.value=MathUtils.randFloat(-1,1),this.uniforms.distortion_x.value=MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=MathUtils.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=MathUtils.randFloat(0,1),this.uniforms.seed_x.value=MathUtils.randFloat(-.3,.3),this.uniforms.seed_y.value=MathUtils.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(a),this.clear&&t.clear(),this.fsQuad.render(t))},generateTrigger:function(){this.randX=MathUtils.randInt(120,240)},generateHeightmap:function(t){for(var a=new Float32Array(t*t*3),i=t*t,s=0;s<i;s++){var r=MathUtils.randFloat(0,1);a[3*s+0]=r,a[3*s+1]=r,a[3*s+2]=r}return new DataTexture(a,t,t,RGBFormat,FloatType)}});export{GlitchPass};
//# sourceMappingURL=/sm/36d2f954acdd17de4c3a4c2087e35bb873409328c0ef789a15f7fa3e7321b597.map
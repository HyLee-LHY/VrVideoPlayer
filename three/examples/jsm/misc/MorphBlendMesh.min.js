/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/misc/MorphBlendMesh.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{MathUtils,Mesh}from"../../../build/three.module.js";var MorphBlendMesh=function(t,i){Mesh.call(this,t,i),this.animationsMap={},this.animationsList=[];var a=Object.keys(this.morphTargetDictionary).length,n=a-1,e=a/1;this.createAnimation("__default",0,n,e),this.setAnimationWeight("__default",1)};MorphBlendMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:MorphBlendMesh,createAnimation:function(t,i,a,n){var e={start:i,end:a,length:a-i+1,fps:n,duration:(a-i)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=e,this.animationsList.push(e)},autoCreateAnimations:function(t){var i,a=/([a-z]+)_?(\d+)/i,n={},e=0;for(var r in this.morphTargetDictionary){var o=r.match(a);if(o&&o.length>1)n[s=o[1]]||(n[s]={start:1/0,end:-1/0}),e<(m=n[s]).start&&(m.start=e),e>m.end&&(m.end=e),i||(i=s);e++}for(var s in n){var m=n[s];this.createAnimation(s,m.start,m.end,t)}this.firstAnimation=i},setAnimationDirectionForward:function(t){var i=this.animationsMap[t];i&&(i.direction=1,i.directionBackwards=!1)},setAnimationDirectionBackward:function(t){var i=this.animationsMap[t];i&&(i.direction=-1,i.directionBackwards=!0)},setAnimationFPS:function(t,i){var a=this.animationsMap[t];a&&(a.fps=i,a.duration=(a.end-a.start)/a.fps)},setAnimationDuration:function(t,i){var a=this.animationsMap[t];a&&(a.duration=i,a.fps=(a.end-a.start)/a.duration)},setAnimationWeight:function(t,i){var a=this.animationsMap[t];a&&(a.weight=i)},setAnimationTime:function(t,i){var a=this.animationsMap[t];a&&(a.time=i)},getAnimationTime:function(t){var i=0,a=this.animationsMap[t];return a&&(i=a.time),i},getAnimationDuration:function(t){var i=-1,a=this.animationsMap[t];return a&&(i=a.duration),i},playAnimation:function(t){var i=this.animationsMap[t];i?(i.time=0,i.active=!0):console.warn("MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},stopAnimation:function(t){var i=this.animationsMap[t];i&&(i.active=!1)},update:function(t){for(var i=0,a=this.animationsList.length;i<a;i++){var n=this.animationsList[i];if(n.active){var e=n.duration/n.length;n.time+=n.direction*t,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var r=n.start+MathUtils.clamp(Math.floor(n.time/e),0,n.length-1),o=n.weight;r!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*o,this.morphTargetInfluences[r]=0,n.lastFrame=n.currentFrame,n.currentFrame=r);var s=n.time%e/e;n.directionBackwards&&(s=1-s),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=s*o,this.morphTargetInfluences[n.lastFrame]=(1-s)*o):this.morphTargetInfluences[n.currentFrame]=o}}}});export{MorphBlendMesh};
//# sourceMappingURL=/sm/73f47a99908159d715e73d556975d8d87a9d857f17268a975dc8241fcf0c29e9.map
/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/nodes/accessors/CameraNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{TempNode}from"../core/TempNode.js";import{FunctionNode}from"../core/FunctionNode.js";import{FloatNode}from"../inputs/FloatNode.js";import{PositionNode}from"../accessors/PositionNode.js";function CameraNode(e,o){TempNode.call(this,"v3"),this.setScope(e||CameraNode.POSITION),this.setCamera(o)}CameraNode.Nodes={depthColor:new FunctionNode(["float depthColor( float mNear, float mFar ) {","\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\treturn 1.0 - smoothstep( mNear, mFar, depth );","}"].join("\n"))},CameraNode.POSITION="position",CameraNode.DEPTH="depth",CameraNode.TO_VERTEX="toVertex",CameraNode.prototype=Object.create(TempNode.prototype),CameraNode.prototype.constructor=CameraNode,CameraNode.prototype.nodeType="Camera",CameraNode.prototype.setCamera=function(e){this.camera=e,this.updateFrame=void 0!==e?this.onUpdateFrame:void 0},CameraNode.prototype.setScope=function(e){switch(this.scope){case CameraNode.DEPTH:delete this.near,delete this.far}switch(this.scope=e,e){case CameraNode.DEPTH:var o=this.camera;this.near=new FloatNode(o?o.near:1),this.far=new FloatNode(o?o.far:1200)}},CameraNode.prototype.getType=function(){switch(this.scope){case CameraNode.DEPTH:return"f"}return this.type},CameraNode.prototype.getUnique=function(){switch(this.scope){case CameraNode.DEPTH:case CameraNode.TO_VERTEX:return!0}return!1},CameraNode.prototype.getShared=function(){switch(this.scope){case CameraNode.POSITION:return!1}return!0},CameraNode.prototype.generate=function(e,o){var a;switch(this.scope){case CameraNode.POSITION:a="cameraPosition";break;case CameraNode.DEPTH:a=e.include(CameraNode.Nodes.depthColor)+"( "+this.near.build(e,"f")+", "+this.far.build(e,"f")+" )";break;case CameraNode.TO_VERTEX:a="normalize( "+new PositionNode(PositionNode.WORLD).build(e,"v3")+" - cameraPosition )"}return e.format(a,this.getType(e),o)},CameraNode.prototype.onUpdateFrame=function(){switch(this.scope){case CameraNode.DEPTH:var e=this.camera;this.near.value=e.near,this.far.value=e.far}},CameraNode.prototype.copy=function(e){switch(TempNode.prototype.copy.call(this,e),this.setScope(e.scope),e.camera&&this.setCamera(e.camera),e.scope){case CameraNode.DEPTH:this.near.number=e.near,this.far.number=e.far}return this},CameraNode.prototype.toJSON=function(e){var o=this.getJSONNode(e);if(!o)switch((o=this.createJSONNode(e)).scope=this.scope,this.camera&&(o.camera=this.camera.uuid),this.scope){case CameraNode.DEPTH:o.near=this.near.value,o.far=this.far.value}return o};export{CameraNode};
//# sourceMappingURL=/sm/ce742e8e9381644ceab5348507672a90a6f196feb067692da608c236db913168.map
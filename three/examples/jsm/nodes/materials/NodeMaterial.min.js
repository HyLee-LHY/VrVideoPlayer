/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/nodes/materials/NodeMaterial.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{FrontSide,LessEqualDepth,NoColors,NormalBlending,ShaderMaterial}from"../../../../build/three.module.js";import{NodeBuilder}from"../core/NodeBuilder.js";import{ColorNode}from"../inputs/ColorNode.js";import{PositionNode}from"../accessors/PositionNode.js";import{RawNode}from"./nodes/RawNode.js";function NodeMaterial(e,i){ShaderMaterial.call(this);var t=this;this.vertex=e||new RawNode(new PositionNode(PositionNode.PROJECTION)),this.fragment=i||new RawNode(new ColorNode(16711680)),this.updaters=[],this.onBeforeCompile=function(e,i){var t=i.properties.get(this);this.version!==t.__version&&(this.build({renderer:i}),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader)},this.onBeforeCompile.toString=function(){return t.needsCompile}}NodeMaterial.prototype=Object.create(ShaderMaterial.prototype),NodeMaterial.prototype.constructor=NodeMaterial,NodeMaterial.prototype.type="NodeMaterial",NodeMaterial.prototype.isNodeMaterial=!0,Object.defineProperties(NodeMaterial.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){!0===e&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}}),NodeMaterial.prototype.updateFrame=function(e){for(var i=0;i<this.updaters.length;++i)e.updateNode(this.updaters[i])},NodeMaterial.prototype.build=function(e){var i=(e=e||{}).builder||new NodeBuilder;return i.setMaterial(this,e.renderer),i.build(this.vertex,this.fragment),this.vertexShader=i.getCode("vertex"),this.fragmentShader=i.getCode("fragment"),this.defines=i.defines,this.uniforms=i.uniforms,this.extensions=i.extensions,this.updaters=i.updaters,this.fog=i.requires.fog,this.lights=i.requires.lights,this.transparent=i.requires.transparent||this.blending>NormalBlending,this},NodeMaterial.prototype.copy=function(e){var i=this.uuid;for(var t in e)this[t]=e[t];return this.uuid=i,void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this},NodeMaterial.prototype.toJSON=function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.materials&&(e.materials={}),!e.materials[this.uuid]){var i={};i.uuid=this.uuid,i.type=this.type,e.materials[i.uuid]=i,""!==this.name&&(i.name=this.name),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==FrontSide&&(i.side=this.side),this.vertexColors!==NoColors&&(i.vertexColors=this.vertexColors),this.depthFunc!==LessEqualDepth&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.fog=this.fog,i.lights=this.lights,i.vertex=this.vertex.toJSON(e).uuid,i.fragment=this.fragment.toJSON(e).uuid}return e.material=this.uuid,e};export{NodeMaterial};
//# sourceMappingURL=/sm/8c4d7341372a2b80a4e823f7ab0eb68b7a151d4f67ff5d62d05ee297641528fd.map
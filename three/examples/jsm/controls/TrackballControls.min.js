/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/examples/jsm/controls/TrackballControls.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{EventDispatcher,MOUSE,Quaternion,Vector2,Vector3}from"../../../build/three.module.js";var TrackballControls=function(e,t){void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var o=this,n={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.ZOOM,RIGHT:MOUSE.PAN},this.target=new Vector3;var a=new Vector3,c=1,s=n.NONE,i=n.NONE,r=new Vector3,p=new Vector2,d=new Vector2,h=new Vector3,m=0,u=new Vector2,l=new Vector2,E=0,g=0,b=new Vector2,y=new Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var v={type:"change"},w={type:"start"},O={type:"end"};this.handleResize=function(){var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height};var f,j,T,k,N,L,C,V,D,P,A,M=(f=new Vector2,function(e,t){return f.set((e-o.screen.left)/o.screen.width,(t-o.screen.top)/o.screen.height),f}),R=function(){var e=new Vector2;return function(t,n){return e.set((t-.5*o.screen.width-o.screen.left)/(.5*o.screen.width),(o.screen.height+2*(o.screen.top-n))/o.screen.width),e}}();function z(e){!1!==o.enabled&&(window.removeEventListener("keydown",z),i===n.NONE&&(e.keyCode!==o.keys[n.ROTATE]||o.noRotate?e.keyCode!==o.keys[n.ZOOM]||o.noZoom?e.keyCode!==o.keys[n.PAN]||o.noPan||(i=n.PAN):i=n.ZOOM:i=n.ROTATE))}function Y(){!1!==o.enabled&&(i=n.NONE,window.addEventListener("keydown",z,!1))}function S(e){if(!1!==o.enabled){if(e.preventDefault(),e.stopPropagation(),s===n.NONE)switch(e.button){case o.mouseButtons.LEFT:s=n.ROTATE;break;case o.mouseButtons.MIDDLE:s=n.ZOOM;break;case o.mouseButtons.RIGHT:s=n.PAN;break;default:s=n.NONE}var t=i!==n.NONE?i:s;t!==n.ROTATE||o.noRotate?t!==n.ZOOM||o.noZoom?t!==n.PAN||o.noPan||(b.copy(M(e.pageX,e.pageY)),y.copy(b)):(u.copy(M(e.pageX,e.pageY)),l.copy(u)):(d.copy(R(e.pageX,e.pageY)),p.copy(d)),document.addEventListener("mousemove",x,!1),document.addEventListener("mouseup",X,!1),o.dispatchEvent(w)}}function x(e){if(!1!==o.enabled){e.preventDefault(),e.stopPropagation();var t=i!==n.NONE?i:s;t!==n.ROTATE||o.noRotate?t!==n.ZOOM||o.noZoom?t!==n.PAN||o.noPan||y.copy(M(e.pageX,e.pageY)):l.copy(M(e.pageX,e.pageY)):(p.copy(d),d.copy(R(e.pageX,e.pageY)))}}function X(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),s=n.NONE,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",X),o.dispatchEvent(O))}function Z(e){if(!1!==o.enabled&&!0!==o.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:u.y-=.025*e.deltaY;break;case 1:u.y-=.01*e.deltaY;break;default:u.y-=25e-5*e.deltaY}o.dispatchEvent(w),o.dispatchEvent(O)}}function H(e){if(!1!==o.enabled){switch(e.preventDefault(),e.touches.length){case 1:s=n.TOUCH_ROTATE,d.copy(R(e.touches[0].pageX,e.touches[0].pageY)),p.copy(d);break;default:s=n.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY;g=E=Math.sqrt(t*t+a*a);var c=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;b.copy(M(c,i)),y.copy(b)}o.dispatchEvent(w)}}function U(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:p.copy(d),d.copy(R(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;g=Math.sqrt(t*t+n*n);var a=(e.touches[0].pageX+e.touches[1].pageX)/2,c=(e.touches[0].pageY+e.touches[1].pageY)/2;y.copy(M(a,c))}}function _(e){if(!1!==o.enabled){switch(e.touches.length){case 0:s=n.NONE;break;case 1:s=n.TOUCH_ROTATE,d.copy(R(e.touches[0].pageX,e.touches[0].pageY)),p.copy(d)}o.dispatchEvent(O)}}function q(e){!1!==o.enabled&&e.preventDefault()}this.rotateCamera=(T=new Vector3,k=new Quaternion,N=new Vector3,L=new Vector3,C=new Vector3,V=new Vector3,function(){V.set(d.x-p.x,d.y-p.y,0),(j=V.length())?(r.copy(o.object.position).sub(o.target),N.copy(r).normalize(),L.copy(o.object.up).normalize(),C.crossVectors(L,N).normalize(),L.setLength(d.y-p.y),C.setLength(d.x-p.x),V.copy(L.add(C)),T.crossVectors(V,r).normalize(),j*=o.rotateSpeed,k.setFromAxisAngle(T,j),r.applyQuaternion(k),o.object.up.applyQuaternion(k),h.copy(T),m=j):!o.staticMoving&&m&&(m*=Math.sqrt(1-o.dynamicDampingFactor),r.copy(o.object.position).sub(o.target),k.setFromAxisAngle(h,m),r.applyQuaternion(k),o.object.up.applyQuaternion(k)),p.copy(d)}),this.zoomCamera=function(){var e;s===n.TOUCH_ZOOM_PAN?(e=E/g,E=g,o.object.isPerspectiveCamera?r.multiplyScalar(e):o.object.isOrthographicCamera?(o.object.zoom*=e,o.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(l.y-u.y)*o.zoomSpeed)&&e>0&&(o.object.isPerspectiveCamera?r.multiplyScalar(e):o.object.isOrthographicCamera?(o.object.zoom/=e,o.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),o.staticMoving?u.copy(l):u.y+=(l.y-u.y)*this.dynamicDampingFactor)},this.panCamera=(D=new Vector2,P=new Vector3,A=new Vector3,function(){if(D.copy(y).sub(b),D.lengthSq()){if(o.object.isOrthographicCamera){var e=(o.object.right-o.object.left)/o.object.zoom/o.domElement.clientWidth,t=(o.object.top-o.object.bottom)/o.object.zoom/o.domElement.clientWidth;D.x*=e,D.y*=t}D.multiplyScalar(r.length()*o.panSpeed),A.copy(r).cross(o.object.up).setLength(D.x),A.add(P.copy(o.object.up).setLength(D.y)),o.object.position.add(A),o.target.add(A),o.staticMoving?b.copy(y):b.add(D.subVectors(y,b).multiplyScalar(o.dynamicDampingFactor))}}),this.checkDistances=function(){o.noZoom&&o.noPan||(r.lengthSq()>o.maxDistance*o.maxDistance&&(o.object.position.addVectors(o.target,r.setLength(o.maxDistance)),u.copy(l)),r.lengthSq()<o.minDistance*o.minDistance&&(o.object.position.addVectors(o.target,r.setLength(o.minDistance)),u.copy(l)))},this.update=function(){r.subVectors(o.object.position,o.target),o.noRotate||o.rotateCamera(),o.noZoom||o.zoomCamera(),o.noPan||o.panCamera(),o.object.position.addVectors(o.target,r),o.object.isPerspectiveCamera?(o.checkDistances(),o.object.lookAt(o.target),a.distanceToSquared(o.object.position)>1e-6&&(o.dispatchEvent(v),a.copy(o.object.position))):o.object.isOrthographicCamera?(o.object.lookAt(o.target),(a.distanceToSquared(o.object.position)>1e-6||c!==o.object.zoom)&&(o.dispatchEvent(v),a.copy(o.object.position),c=o.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){s=n.NONE,i=n.NONE,o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.up.copy(o.up0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),r.subVectors(o.object.position,o.target),o.object.lookAt(o.target),o.dispatchEvent(v),a.copy(o.object.position),c=o.object.zoom},this.dispose=function(){this.domElement.removeEventListener("contextmenu",q,!1),this.domElement.removeEventListener("mousedown",S,!1),this.domElement.removeEventListener("wheel",Z,!1),this.domElement.removeEventListener("touchstart",H,!1),this.domElement.removeEventListener("touchend",_,!1),this.domElement.removeEventListener("touchmove",U,!1),document.removeEventListener("mousemove",x,!1),document.removeEventListener("mouseup",X,!1),window.removeEventListener("keydown",z,!1),window.removeEventListener("keyup",Y,!1)},this.domElement.addEventListener("contextmenu",q,!1),this.domElement.addEventListener("mousedown",S,!1),this.domElement.addEventListener("wheel",Z,!1),this.domElement.addEventListener("touchstart",H,!1),this.domElement.addEventListener("touchend",_,!1),this.domElement.addEventListener("touchmove",U,!1),window.addEventListener("keydown",z,!1),window.addEventListener("keyup",Y,!1),this.handleResize(),this.update()};TrackballControls.prototype=Object.create(EventDispatcher.prototype),TrackballControls.prototype.constructor=TrackballControls;export{TrackballControls};
//# sourceMappingURL=/sm/c265fe56936dad1cc37dd1a575643607e9808523e3cbc1e9ed51c70aad7138c9.map
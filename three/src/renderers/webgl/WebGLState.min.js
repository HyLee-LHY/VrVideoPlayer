/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/renderers/webgl/WebGLState.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{NotEqualDepth,GreaterDepth,GreaterEqualDepth,EqualDepth,LessEqualDepth,LessDepth,AlwaysDepth,NeverDepth,CullFaceFront,CullFaceBack,CullFaceNone,DoubleSide,BackSide,CustomBlending,MultiplyBlending,SubtractiveBlending,AdditiveBlending,NoBlending,NormalBlending,AddEquation,SubtractEquation,ReverseSubtractEquation,MinEquation,MaxEquation,ZeroFactor,OneFactor,SrcColorFactor,SrcAlphaFactor,SrcAlphaSaturateFactor,DstColorFactor,DstAlphaFactor,OneMinusSrcColorFactor,OneMinusSrcAlphaFactor,OneMinusDstColorFactor,OneMinusDstAlphaFactor}from"../../constants.js";import{Vector4}from"../../math/Vector4.js";function WebGLState(e,t,n){var l=n.isWebGL2;var a=new function(){var t=!1,n=new Vector4,l=null,a=new Vector4(0,0,0,0);return{setMask:function(n){l===n||t||(e.colorMask(n,n,n,n),l=n)},setLocked:function(e){t=e},setClear:function(t,l,r,u,i){!0===i&&(t*=u,l*=u,r*=u),n.set(t,l,r,u),!1===a.equals(n)&&(e.clearColor(t,l,r,u),a.copy(n))},reset:function(){t=!1,l=null,a.set(-1,0,0,0)}}},r=new function(){var t=!1,n=null,l=null,a=null;return{setTest:function(t){t?q(e.DEPTH_TEST):m(e.DEPTH_TEST)},setMask:function(l){n===l||t||(e.depthMask(l),n=l)},setFunc:function(t){if(l!==t){if(t)switch(t){case NeverDepth:e.depthFunc(e.NEVER);break;case AlwaysDepth:e.depthFunc(e.ALWAYS);break;case LessDepth:e.depthFunc(e.LESS);break;case LessEqualDepth:e.depthFunc(e.LEQUAL);break;case EqualDepth:e.depthFunc(e.EQUAL);break;case GreaterEqualDepth:e.depthFunc(e.GEQUAL);break;case GreaterDepth:e.depthFunc(e.GREATER);break;case NotEqualDepth:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);l=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,l=null,a=null}}},u=new function(){var t=!1,n=null,l=null,a=null,r=null,u=null,i=null,c=null,o=null;return{setTest:function(n){t||(n?q(e.STENCIL_TEST):m(e.STENCIL_TEST))},setMask:function(l){n===l||t||(e.stencilMask(l),n=l)},setFunc:function(t,n,u){l===t&&a===n&&r===u||(e.stencilFunc(t,n,u),l=t,a=n,r=u)},setOp:function(t,n,l){u===t&&i===n&&c===l||(e.stencilOp(t,n,l),u=t,i=n,c=l)},setLocked:function(e){t=e},setClear:function(t){o!==t&&(e.clearStencil(t),o=t)},reset:function(){t=!1,n=null,l=null,a=null,r=null,u=null,i=null,c=null,o=null}}},i=e.getParameter(e.MAX_VERTEX_ATTRIBS),c=new Uint8Array(i),o=new Uint8Array(i),s=new Uint8Array(i),E={},d=null,A=null,S=null,_=null,p=null,T=null,F=null,b=null,f=null,C=!1,L=null,O=null,N=null,R=null,D=null,h=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),M=!1,v=0,U=e.getParameter(e.VERSION);-1!==U.indexOf("WebGL")?(v=parseFloat(/^WebGL\ ([0-9])/.exec(U)[1]),M=v>=1):-1!==U.indexOf("OpenGL ES")&&(v=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(U)[1]),M=v>=2);var g=null,I={},x=new Vector4,B=new Vector4;function k(t,n,l){var a=new Uint8Array(4),r=e.createTexture();e.bindTexture(t,r),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var u=0;u<l;u++)e.texImage2D(n+u,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return r}var y={};function P(n,a){(c[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==a)&&((l?e:t.get("ANGLE_instanced_arrays"))[l?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,a),s[n]=a)}function q(t){!0!==E[t]&&(e.enable(t),E[t]=!0)}function m(t){!1!==E[t]&&(e.disable(t),E[t]=!1)}y[e.TEXTURE_2D]=k(e.TEXTURE_2D,e.TEXTURE_2D,1),y[e.TEXTURE_CUBE_MAP]=k(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),a.setClear(0,0,0,1),r.setClear(1),u.setClear(0),q(e.DEPTH_TEST),r.setFunc(LessEqualDepth),X(!1),V(CullFaceBack),q(e.CULL_FACE),W(NoBlending);var G={[AddEquation]:e.FUNC_ADD,[SubtractEquation]:e.FUNC_SUBTRACT,[ReverseSubtractEquation]:e.FUNC_REVERSE_SUBTRACT};if(l)G[MinEquation]=e.MIN,G[MaxEquation]=e.MAX;else{var H=t.get("EXT_blend_minmax");null!==H&&(G[MinEquation]=H.MIN_EXT,G[MaxEquation]=H.MAX_EXT)}var w={[ZeroFactor]:e.ZERO,[OneFactor]:e.ONE,[SrcColorFactor]:e.SRC_COLOR,[SrcAlphaFactor]:e.SRC_ALPHA,[SrcAlphaSaturateFactor]:e.SRC_ALPHA_SATURATE,[DstColorFactor]:e.DST_COLOR,[DstAlphaFactor]:e.DST_ALPHA,[OneMinusSrcColorFactor]:e.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:e.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:e.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:e.ONE_MINUS_DST_ALPHA};function W(t,n,l,a,r,u,i,c){if(t!==NoBlending){if(A||(q(e.BLEND),A=!0),t===CustomBlending)r=r||n,u=u||l,i=i||a,n===_&&r===F||(e.blendEquationSeparate(G[n],G[r]),_=n,F=r),l===p&&a===T&&u===b&&i===f||(e.blendFuncSeparate(w[l],w[a],w[u],w[i]),p=l,T=a,b=u,f=i),S=t,C=null;else if(t!==S||c!==C){if(_===AddEquation&&F===AddEquation||(e.blendEquation(e.FUNC_ADD),_=AddEquation,F=AddEquation),c)switch(t){case NormalBlending:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:e.blendFunc(e.ONE,e.ONE);break;case SubtractiveBlending:e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case MultiplyBlending:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case NormalBlending:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case SubtractiveBlending:e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR);break;case MultiplyBlending:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}p=null,T=null,b=null,f=null,S=t,C=c}}else A&&(m(e.BLEND),A=!1)}function X(t){L!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),L=t)}function V(t){t!==CullFaceNone?(q(e.CULL_FACE),t!==O&&(t===CullFaceBack?e.cullFace(e.BACK):t===CullFaceFront?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):m(e.CULL_FACE),O=t}function Z(t,n,l){t?(q(e.POLYGON_OFFSET_FILL),R===n&&D===l||(e.polygonOffset(n,l),R=n,D=l)):m(e.POLYGON_OFFSET_FILL)}function Q(t){void 0===t&&(t=e.TEXTURE0+h-1),g!==t&&(e.activeTexture(t),g=t)}return{buffers:{color:a,depth:r,stencil:u},initAttributes:function(){for(var e=0,t=c.length;e<t;e++)c[e]=0},enableAttribute:function(e){P(e,0)},enableAttributeAndDivisor:P,disableUnusedAttributes:function(){for(var t=0,n=o.length;t!==n;++t)o[t]!==c[t]&&(e.disableVertexAttribArray(t),o[t]=0)},vertexAttribPointer:function(t,n,a,r,u,i){!0!==l||a!==e.INT&&a!==e.UNSIGNED_INT?e.vertexAttribPointer(t,n,a,r,u,i):e.vertexAttribIPointer(t,n,a,r,u,i)},enable:q,disable:m,useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:W,setMaterial:function(t,n){t.side===DoubleSide?m(e.CULL_FACE):q(e.CULL_FACE);var l=t.side===BackSide;n&&(l=!l),X(l),t.blending===NormalBlending&&!1===t.transparent?W(NoBlending):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),a.setMask(t.colorWrite);var i=t.stencilWrite;u.setTest(i),i&&(u.setMask(t.stencilWriteMask),u.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),u.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Z(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:X,setCullFace:V,setLineWidth:function(t){t!==N&&(M&&e.lineWidth(t),N=t)},setPolygonOffset:Z,setScissorTest:function(t){t?q(e.SCISSOR_TEST):m(e.SCISSOR_TEST)},activeTexture:Q,bindTexture:function(t,n){null===g&&Q();var l=I[g];void 0===l&&(l={type:void 0,texture:void 0},I[g]=l),l.type===t&&l.texture===n||(e.bindTexture(t,n||y[t]),l.type=t,l.texture=n)},unbindTexture:function(){var t=I[g];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===x.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),x.copy(t))},viewport:function(t){!1===B.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){for(var t=0;t<o.length;t++)1===o[t]&&(e.disableVertexAttribArray(t),o[t]=0);E={},g=null,I={},d=null,S=null,L=null,O=null,a.reset(),r.reset(),u.reset()}}}export{WebGLState};
//# sourceMappingURL=/sm/ad3e037ceaa2250b87f7ca6c214eec169c553ff78a3d53678ae5e36fd7900e7f.map
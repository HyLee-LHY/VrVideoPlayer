/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/renderers/webgl/WebGLGeometries.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Uint16BufferAttribute,Uint32BufferAttribute}from"../../core/BufferAttribute.js";import{BufferGeometry}from"../../core/BufferGeometry.js";import{arrayMax}from"../../utils.js";function WebGLGeometries(e,r,t){var i=new WeakMap,o=new WeakMap;function n(e){var a=e.target,u=i.get(a);for(var f in null!==u.index&&r.remove(u.index),u.attributes)r.remove(u.attributes[f]);a.removeEventListener("dispose",n),i.delete(a);var s=o.get(u);s&&(r.remove(s),o.delete(u)),t.memory.geometries--}function a(t){var i=[],n=t.index,a=t.attributes.position,u=0;if(null!==n){var f=n.array;u=n.version;for(var s=0,v=f.length;s<v;s+=3){var m=f[s+0],b=f[s+1],d=f[s+2];i.push(m,b,b,d,d,m)}}else{f=a.array;u=a.version;for(s=0,v=f.length/3-1;s<v;s+=3){m=s+0,b=s+1,d=s+2;i.push(m,b,b,d,d,m)}}var p=new(arrayMax(i)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(i,1);p.version=u,r.update(p,e.ELEMENT_ARRAY_BUFFER);var l=o.get(t);l&&r.remove(l),o.set(t,p)}return{get:function(e,r){var o=i.get(r);return o||(r.addEventListener("dispose",n),r.isBufferGeometry?o=r:r.isGeometry&&(void 0===r._bufferGeometry&&(r._bufferGeometry=(new BufferGeometry).setFromObject(e)),o=r._bufferGeometry),i.set(r,o),t.memory.geometries++,o)},update:function(t){var i=t.index,o=t.attributes;for(var n in null!==i&&r.update(i,e.ELEMENT_ARRAY_BUFFER),o)r.update(o[n],e.ARRAY_BUFFER);var a=t.morphAttributes;for(var n in a)for(var u=a[n],f=0,s=u.length;f<s;f++)r.update(u[f],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){var r=o.get(e);if(r){var t=e.index;null!==t&&r.version<t.version&&a(e)}else a(e);return o.get(e)}}}export{WebGLGeometries};
//# sourceMappingURL=/sm/123cc61c7bf4602dfc01dcf482fe7c9ce69ba734a183220cfe6cf3369243148f.map
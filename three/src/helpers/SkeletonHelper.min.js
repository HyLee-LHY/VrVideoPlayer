/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/helpers/SkeletonHelper.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{LineSegments}from"../objects/LineSegments.js";import{Matrix4}from"../math/Matrix4.js";import{LineBasicMaterial}from"../materials/LineBasicMaterial.js";import{Color}from"../math/Color.js";import{Vector3}from"../math/Vector3.js";import{BufferGeometry}from"../core/BufferGeometry.js";import{Float32BufferAttribute}from"../core/BufferAttribute.js";import{Object3D}from"../core/Object3D.js";var _vector=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(t){var e=[];t&&t.isBone&&e.push(t);for(var r=0;r<t.children.length;r++)e.push.apply(e,getBoneList(t.children[r]));return e}function SkeletonHelper(t){for(var e=getBoneList(t),r=new BufferGeometry,o=[],i=[],n=new Color(0,0,1),a=new Color(0,1,0),s=0;s<e.length;s++){var p=e[s];p.parent&&p.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),i.push(n.r,n.g,n.b),i.push(a.r,a.g,a.b))}r.setAttribute("position",new Float32BufferAttribute(o,3)),r.setAttribute("color",new Float32BufferAttribute(i,3));var l=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,r,l),this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype),SkeletonHelper.prototype.constructor=SkeletonHelper,SkeletonHelper.prototype.isSkeletonHelper=!0,SkeletonHelper.prototype.updateMatrixWorld=function(t){var e=this.bones,r=this.geometry,o=r.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var i=0,n=0;i<e.length;i++){var a=e[i];a.parent&&a.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,a.matrixWorld),_vector.setFromMatrixPosition(_boneMatrix),o.setXYZ(n,_vector.x,_vector.y,_vector.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,a.parent.matrixWorld),_vector.setFromMatrixPosition(_boneMatrix),o.setXYZ(n+1,_vector.x,_vector.y,_vector.z),n+=2)}r.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,t)};export{SkeletonHelper};
//# sourceMappingURL=/sm/c2e74198b77e51d41dca003ccdd227b7d80eba585518d10e1cfdbc204da714eb.map
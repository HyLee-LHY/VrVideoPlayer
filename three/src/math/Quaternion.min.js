/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/math/Quaternion.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{MathUtils}from"./MathUtils.js";function Quaternion(t,i,s,h){this._x=t||0,this._y=i||0,this._z=s||0,this._w=void 0!==h?h:1}Object.assign(Quaternion,{slerp:function(t,i,s,h){return s.copy(t).slerp(i,h)},slerpFlat:function(t,i,s,h,n,_,r){var e=s[h+0],a=s[h+1],o=s[h+2],u=s[h+3],c=n[_+0],l=n[_+1],y=n[_+2],x=n[_+3];if(u!==x||e!==c||a!==l||o!==y){var z=1-r,w=e*c+a*l+o*y+u*x,f=w>=0?1:-1,g=1-w*w;if(g>Number.EPSILON){var C=Math.sqrt(g),b=Math.atan2(C,w*f);z=Math.sin(z*b)/C,r=Math.sin(r*b)/C}var p=r*f;if(e=e*z+c*p,a=a*z+l*p,o=o*z+y*p,u=u*z+x*p,z===1-r){var m=1/Math.sqrt(e*e+a*a+o*o+u*u);e*=m,a*=m,o*=m,u*=m}}t[i]=e,t[i+1]=a,t[i+2]=o,t[i+3]=u},multiplyQuaternionsFlat:function(t,i,s,h,n,_){var r=s[h],e=s[h+1],a=s[h+2],o=s[h+3],u=n[_],c=n[_+1],l=n[_+2],y=n[_+3];return t[i]=r*y+o*u+e*l-a*c,t[i+1]=e*y+o*c+a*u-r*l,t[i+2]=a*y+o*l+r*c-e*u,t[i+3]=o*y-r*u-e*c-a*l,t}}),Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(t,i,s,h){return this._x=t,this._y=i,this._z=s,this._w=h,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var s=t._x,h=t._y,n=t._z,_=t.order,r=Math.cos,e=Math.sin,a=r(s/2),o=r(h/2),u=r(n/2),c=e(s/2),l=e(h/2),y=e(n/2);switch(_){case"XYZ":this._x=c*o*u+a*l*y,this._y=a*l*u-c*o*y,this._z=a*o*y+c*l*u,this._w=a*o*u-c*l*y;break;case"YXZ":this._x=c*o*u+a*l*y,this._y=a*l*u-c*o*y,this._z=a*o*y-c*l*u,this._w=a*o*u+c*l*y;break;case"ZXY":this._x=c*o*u-a*l*y,this._y=a*l*u+c*o*y,this._z=a*o*y+c*l*u,this._w=a*o*u-c*l*y;break;case"ZYX":this._x=c*o*u-a*l*y,this._y=a*l*u+c*o*y,this._z=a*o*y-c*l*u,this._w=a*o*u+c*l*y;break;case"YZX":this._x=c*o*u+a*l*y,this._y=a*l*u+c*o*y,this._z=a*o*y-c*l*u,this._w=a*o*u-c*l*y;break;case"XZY":this._x=c*o*u-a*l*y,this._y=a*l*u-c*o*y,this._z=a*o*y+c*l*u,this._w=a*o*u+c*l*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+_)}return!1!==i&&this._onChangeCallback(),this},setFromAxisAngle:function(t,i){var s=i/2,h=Math.sin(s);return this._x=t.x*h,this._y=t.y*h,this._z=t.z*h,this._w=Math.cos(s),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var i,s=t.elements,h=s[0],n=s[4],_=s[8],r=s[1],e=s[5],a=s[9],o=s[2],u=s[6],c=s[10],l=h+e+c;return l>0?(i=.5/Math.sqrt(l+1),this._w=.25/i,this._x=(u-a)*i,this._y=(_-o)*i,this._z=(r-n)*i):h>e&&h>c?(i=2*Math.sqrt(1+h-e-c),this._w=(u-a)/i,this._x=.25*i,this._y=(n+r)/i,this._z=(_+o)/i):e>c?(i=2*Math.sqrt(1+e-h-c),this._w=(_-o)/i,this._x=(n+r)/i,this._y=.25*i,this._z=(a+u)/i):(i=2*Math.sqrt(1+c-h-e),this._w=(r-n)/i,this._x=(_+o)/i,this._y=(a+u)/i,this._z=.25*i),this._onChangeCallback(),this},setFromUnitVectors:function(t,i){var s=t.dot(i)+1;return s<1e-6?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=s),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,i){var s=this.angleTo(t);if(0===s)return this;var h=Math.min(1,i/s);return this.slerp(t,h),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,i){var s=t._x,h=t._y,n=t._z,_=t._w,r=i._x,e=i._y,a=i._z,o=i._w;return this._x=s*o+_*r+h*a-n*e,this._y=h*o+_*e+n*r-s*a,this._z=n*o+_*a+s*e-h*r,this._w=_*o-s*r-h*e-n*a,this._onChangeCallback(),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var s=this._x,h=this._y,n=this._z,_=this._w,r=_*t._w+s*t._x+h*t._y+n*t._z;if(r<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,r=-r):this.copy(t),r>=1)return this._w=_,this._x=s,this._y=h,this._z=n,this;var e=1-r*r;if(e<=Number.EPSILON){var a=1-i;return this._w=a*_+i*this._w,this._x=a*s+i*this._x,this._y=a*h+i*this._y,this._z=a*n+i*this._z,this.normalize(),this._onChangeCallback(),this}var o=Math.sqrt(e),u=Math.atan2(o,r),c=Math.sin((1-i)*u)/o,l=Math.sin(i*u)/o;return this._w=_*c+this._w*l,this._x=s*c+this._x*l,this._y=h*c+this._y*l,this._z=n*c+this._z*l,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},fromBufferAttribute:function(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});export{Quaternion};
//# sourceMappingURL=/sm/60c57826c686300b61c744bdcb18e02091ac475c2dacc9cf9dd85de664cafaa0.map
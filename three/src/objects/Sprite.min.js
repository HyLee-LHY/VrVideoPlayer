/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/objects/Sprite.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Vector2}from"../math/Vector2.js";import{Vector3}from"../math/Vector3.js";import{Matrix4}from"../math/Matrix4.js";import{Triangle}from"../math/Triangle.js";import{Object3D}from"../core/Object3D.js";import{BufferGeometry}from"../core/BufferGeometry.js";import{InterleavedBuffer}from"../core/InterleavedBuffer.js";import{InterleavedBufferAttribute}from"../core/InterleavedBufferAttribute.js";import{SpriteMaterial}from"../materials/SpriteMaterial.js";var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;function Sprite(t){if(Object3D.call(this),this.type="Sprite",void 0===_geometry){_geometry=new BufferGeometry;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new InterleavedBuffer(e,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(r,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(r,2,3,!1))}this.geometry=_geometry,this.material=void 0!==t?t:new SpriteMaterial,this.center=new Vector2(.5,.5)}function transformVertex(t,e,r,o,i,a){_alignedPosition.subVectors(t,r).addScalar(.5).multiply(o),void 0!==i?(_rotatedPosition.x=a*_alignedPosition.x-i*_alignedPosition.y,_rotatedPosition.y=i*_alignedPosition.x+a*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),t.copy(e),t.x+=_rotatedPosition.x,t.y+=_rotatedPosition.y,t.applyMatrix4(_viewWorldMatrix)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&_worldScale.multiplyScalar(-_mvPosition.z);var r,o,i=this.material.rotation;0!==i&&(o=Math.cos(i),r=Math.sin(i));var a=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,a,_worldScale,r,o),transformVertex(_vB.set(.5,-.5,0),_mvPosition,a,_worldScale,r,o),transformVertex(_vC.set(.5,.5,0),_mvPosition,a,_worldScale,r,o),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);var n=t.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(null!==n||(transformVertex(_vB.set(-.5,.5,0),_mvPosition,a,_worldScale,r,o),_uvB.set(0,1),null!==(n=t.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint)))){var s=t.ray.origin.distanceTo(_intersectPoint);s<t.near||s>t.far||e.push({distance:s,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Object3D.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});export{Sprite};
//# sourceMappingURL=/sm/622e38c6418b4a3425e95243abcf656d3c5f638be0212517b2df09d7911f1dd1.map
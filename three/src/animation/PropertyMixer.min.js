/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/animation/PropertyMixer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Quaternion}from"../math/Quaternion.js";function PropertyMixer(i,t,e){var s,r,n;switch(this.binding=i,this.valueSize=e,t){case"quaternion":s=this._slerp,r=this._slerpAdditive,n=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*e),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,n=this._setAdditiveIdentityOther,this.buffer=new Array(5*e);break;default:s=this._lerp,r=this._lerpAdditive,n=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*e)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=n,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(i,t){var e=this.buffer,s=this.valueSize,r=i*s+s,n=this.cumulativeWeight;if(0===n){for(var u=0;u!==s;++u)e[r+u]=e[u];n=t}else{var h=t/(n+=t);this._mixBufferRegion(e,r,0,h,s)}this.cumulativeWeight=n},accumulateAdditive:function(i){var t=this.buffer,e=this.valueSize,s=e*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,i,e),this.cumulativeWeightAdditive+=i},apply:function(i){var t=this.valueSize,e=this.buffer,s=i*t+t,r=this.cumulativeWeight,n=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var h=t*this._origIndex;this._mixBufferRegion(e,s,h,1-r,t)}n>0&&this._mixBufferRegionAdditive(e,s,this._addIndex*t,1,t);for(var a=t,d=t+t;a!==d;++a)if(e[a]!==e[a+t]){u.setValue(e,s);break}},saveOriginalState:function(){var i=this.binding,t=this.buffer,e=this.valueSize,s=e*this._origIndex;i.getValue(t,s);for(var r=e,n=s;r!==n;++r)t[r]=t[s+r%e];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var i=3*this.valueSize;this.binding.setValue(this.buffer,i)},_setAdditiveIdentityNumeric:function(){for(var i=this._addIndex*this.valueSize,t=i+this.valueSize,e=i;e<t;e++)this.buffer[e]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var i=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,e=0;e<this.valueSize;e++)this.buffer[t+e]=this.buffer[i+e]},_select:function(i,t,e,s,r){if(s>=.5)for(var n=0;n!==r;++n)i[t+n]=i[e+n]},_slerp:function(i,t,e,s){Quaternion.slerpFlat(i,t,i,t,i,e,s)},_slerpAdditive:function(i,t,e,s,r){var n=this._workIndex*r;Quaternion.multiplyQuaternionsFlat(i,n,i,t,i,e),Quaternion.slerpFlat(i,t,i,t,i,n,s)},_lerp:function(i,t,e,s,r){for(var n=1-s,u=0;u!==r;++u){var h=t+u;i[h]=i[h]*n+i[e+u]*s}},_lerpAdditive:function(i,t,e,s,r){for(var n=0;n!==r;++n){var u=t+n;i[u]=i[u]+i[e+n]*s}}});export{PropertyMixer};
//# sourceMappingURL=/sm/6e6ad8e63e2b06f1914c208869e40ea2b13fe0773fa65b4d9985fd55bac73245.map
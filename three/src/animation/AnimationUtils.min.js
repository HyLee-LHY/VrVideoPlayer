/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/animation/AnimationUtils.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Quaternion}from"../math/Quaternion.js";import{AdditiveAnimationBlendMode}from"../constants.js";var AnimationUtils={arraySlice:function(r,e,t){return AnimationUtils.isTypedArray(r)?new r.constructor(r.subarray(e,void 0!==t?t:r.length)):r.slice(e,t)},convertArray:function(r,e,t){return!r||!t&&r.constructor===e?r:"number"==typeof e.BYTES_PER_ELEMENT?new e(r):Array.prototype.slice.call(r)},isTypedArray:function(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)},getKeyframeOrder:function(r){for(var e=r.length,t=new Array(e),i=0;i!==e;++i)t[i]=i;return t.sort(function(e,t){return r[e]-r[t]}),t},sortedArray:function(r,e,t){for(var i=r.length,a=new r.constructor(i),n=0,o=0;o!==i;++n)for(var s=t[n]*e,l=0;l!==e;++l)a[o++]=r[s+l];return a},flattenJSON:function(r,e,t,i){for(var a=1,n=r[0];void 0!==n&&void 0===n[i];)n=r[a++];if(void 0!==n){var o=n[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=n[i])&&(e.push(n.time),t.push.apply(t,o)),n=r[a++]}while(void 0!==n);else if(void 0!==o.toArray)do{void 0!==(o=n[i])&&(e.push(n.time),o.toArray(t,t.length)),n=r[a++]}while(void 0!==n);else do{void 0!==(o=n[i])&&(e.push(n.time),t.push(o)),n=r[a++]}while(void 0!==n)}},subclip:function(r,e,t,i,a){a=a||30;var n=r.clone();n.name=e;for(var o=[],s=0;s<n.tracks.length;++s){for(var l=n.tracks[s],u=l.getValueSize(),v=[],c=[],f=0;f<l.times.length;++f){var m=l.times[f]*a;if(!(m<t||m>=i)){v.push(l.times[f]);for(var d=0;d<u;++d)c.push(l.values[f*u+d])}}0!==v.length&&(l.times=AnimationUtils.convertArray(v,l.times.constructor),l.values=AnimationUtils.convertArray(c,l.values.constructor),o.push(l))}n.tracks=o;var y=1/0;for(s=0;s<n.tracks.length;++s)y>n.tracks[s].times[0]&&(y=n.tracks[s].times[0]);for(s=0;s<n.tracks.length;++s)n.tracks[s].shift(-1*y);return n.resetDuration(),n},makeClipAdditive:function(r,e,t,i){void 0===e&&(e=0),void 0===t&&(t=r),(void 0===i||i<=0)&&(i=30);for(var a=r.tracks.length,n=e/i,o=0;o<a;++o){var s=t.tracks[o],l=s.ValueTypeName;if("bool"!==l&&"string"!==l){var u=r.tracks.find(function(r){return r.name===s.name&&r.ValueTypeName===l});if(void 0!==u){var v,c=s.getValueSize(),f=s.times.length-1;if(n<=s.times[0])v=AnimationUtils.arraySlice(s.values,0,s.valueSize);else if(n>=s.times[f]){var m=f*c;v=AnimationUtils.arraySlice(s.values,m)}else{var d=s.createInterpolant();d.evaluate(n),v=d.resultBuffer}if("quaternion"===l)new Quaternion(v[0],v[1],v[2],v[3]).normalize().conjugate().toArray(v);for(var y=u.times.length,A=0;A<y;++A){var h=A*c;if("quaternion"===l)Quaternion.multiplyQuaternionsFlat(u.values,h,v,0,u.values,h);else for(var p=0;p<c;++p)u.values[h+p]-=v[p]}}}}return r.blendMode=AdditiveAnimationBlendMode,r}};export{AnimationUtils};
//# sourceMappingURL=/sm/0fe4ce4eaa94c90d0fae05db79d0973ac56ba9f44a76d42bf19d82b72e3d46db.map
/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/animation/KeyframeTrack.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{InterpolateLinear,InterpolateSmooth,InterpolateDiscrete}from"../constants.js";import{CubicInterpolant}from"../math/interpolants/CubicInterpolant.js";import{LinearInterpolant}from"../math/interpolants/LinearInterpolant.js";import{DiscreteInterpolant}from"../math/interpolants/DiscreteInterpolant.js";import{AnimationUtils}from"./AnimationUtils.js";function KeyframeTrack(t,e,r,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=AnimationUtils.convertArray(e,this.TimeBufferType),this.values=AnimationUtils.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(t){var e,r=t.constructor;if(void 0!==r.toJSON)e=r.toJSON(t);else{e={name:t.name,times:AnimationUtils.convertArray(t.times,Array),values:AnimationUtils.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(t){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new LinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new CubicInterpolant(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case InterpolateDiscrete:e=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:e=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,r=0,i=e.length;r!==i;++r)e[r]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,r=0,i=e.length;r!==i;++r)e[r]*=t;return this},trim:function(t,e){for(var r=this.times,i=r.length,a=0,n=i-1;a!==i&&r[a]<t;)++a;for(;-1!==n&&r[n]>e;)--n;if(++n,0!==a||n!==i){a>=n&&(a=(n=Math.max(n,1))-1);var o=this.getValueSize();this.times=AnimationUtils.arraySlice(r,a,n),this.values=AnimationUtils.arraySlice(this.values,a*o,n*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var r=this.times,i=this.values,a=r.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var n=null,o=0;o!==a;o++){var s=r[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),t=!1;break}if(null!==n&&n>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,n),t=!1;break}n=s}if(void 0!==i&&AnimationUtils.isTypedArray(i)){o=0;for(var l=i.length;o!==l;++o){var h=i[o];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,h),t=!1;break}}}return t},optimize:function(){for(var t=AnimationUtils.arraySlice(this.times),e=AnimationUtils.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===InterpolateSmooth,a=1,n=t.length-1,o=1;o<n;++o){var s=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(i)s=!0;else for(var h=o*r,c=h-r,m=h+r,f=0;f!==r;++f){var u=e[h+f];if(u!==e[c+f]||u!==e[m+f]){s=!0;break}}if(s){if(o!==a){t[a]=t[o];var p=o*r,y=a*r;for(f=0;f!==r;++f)e[y+f]=e[p+f]}++a}}if(n>0){t[a]=t[n];for(p=n*r,y=a*r,f=0;f!==r;++f)e[y+f]=e[p+f];++a}return a!==t.length?(this.times=AnimationUtils.arraySlice(t,0,a),this.values=AnimationUtils.arraySlice(e,0,a*r)):(this.times=t,this.values=e),this},clone:function(){var t=AnimationUtils.arraySlice(this.times,0),e=AnimationUtils.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}});export{KeyframeTrack};
//# sourceMappingURL=/sm/646c05919670133453a5dd02c5d11a74d55eedcad19e20068953235275c4f409.map
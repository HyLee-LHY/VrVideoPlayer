/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/geometries/ExtrudeGeometry.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Geometry}from"../core/Geometry.js";import{BufferGeometry}from"../core/BufferGeometry.js";import{Float32BufferAttribute}from"../core/BufferAttribute.js";import{Vector2}from"../math/Vector2.js";import{Vector3}from"../math/Vector3.js";import{ShapeUtils}from"../extras/ShapeUtils.js";function ExtrudeGeometry(e,t){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ExtrudeBufferGeometry(e,t)),this.mergeVertices()}function ExtrudeBufferGeometry(e,t){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var r=this,o=[],a=[],n=0,s=e.length;n<s;n++){u(e[n])}function u(e){var n=[],s=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,i=void 0!==t.depth?t.depth:100,h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:6,l=void 0!==t.bevelSize?t.bevelSize:f-2,p=void 0!==t.bevelOffset?t.bevelOffset:0,c=void 0!==t.bevelSegments?t.bevelSegments:3,m=t.extrudePath,y=void 0!==t.UVGenerator?t.UVGenerator:WorldUVGenerator;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),i=t.amount);var d,v,x,g,G,S,b,V,E=!1;m&&(d=m.getSpacedPoints(u),E=!0,h=!1,v=m.computeFrenetFrames(u,!1),x=new Vector3,g=new Vector3,G=new Vector3),h||(c=0,f=0,l=0,p=0);var w=e.extractPoints(s),B=w.shape,N=w.holes;if(!ShapeUtils.isClockWise(B))for(B=B.reverse(),b=0,V=N.length;b<V;b++)S=N[b],ShapeUtils.isClockWise(S)&&(N[b]=S.reverse());var M=ShapeUtils.triangulateShape(B,N),O=B;for(b=0,V=N.length;b<V;b++)S=N[b],B=B.concat(S);function P(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var U,A,I,j,J,T,W=B.length,q=M.length;function F(e,t,r){var o,a,n,s=e.x-t.x,u=e.y-t.y,i=r.x-e.x,h=r.y-e.y,f=s*s+u*u,l=s*h-u*i;if(Math.abs(l)>Number.EPSILON){var p=Math.sqrt(f),c=Math.sqrt(i*i+h*h),m=t.x-u/p,y=t.y+s/p,d=((r.x-h/c-m)*h-(r.y+i/c-y)*i)/(s*h-u*i),v=(o=m+s*d-e.x)*o+(a=y+u*d-e.y)*a;if(v<=2)return new Vector2(o,a);n=Math.sqrt(v/2)}else{var x=!1;s>Number.EPSILON?i>Number.EPSILON&&(x=!0):s<-Number.EPSILON?i<-Number.EPSILON&&(x=!0):Math.sign(u)===Math.sign(h)&&(x=!0),x?(o=-u,a=s,n=Math.sqrt(f)):(o=s,a=u,n=Math.sqrt(f/2))}return new Vector2(o/n,a/n)}for(var L=[],k=0,z=O.length,C=z-1,H=k+1;k<z;k++,C++,H++)C===z&&(C=0),H===z&&(H=0),L[k]=F(O[k],O[C],O[H]);var R,D,K=[],Q=L.concat();for(b=0,V=N.length;b<V;b++){for(S=N[b],R=[],k=0,C=(z=S.length)-1,H=k+1;k<z;k++,C++,H++)C===z&&(C=0),H===z&&(H=0),R[k]=F(S[k],S[C],S[H]);K.push(R),Q=Q.concat(R)}for(U=0;U<c;U++){for(I=U/c,j=f*Math.cos(I*Math.PI/2),A=l*Math.sin(I*Math.PI/2)+p,k=0,z=O.length;k<z;k++)Y((J=P(O[k],L[k],A)).x,J.y,-j);for(b=0,V=N.length;b<V;b++)for(S=N[b],R=K[b],k=0,z=S.length;k<z;k++)Y((J=P(S[k],R[k],A)).x,J.y,-j)}for(A=l+p,k=0;k<W;k++)J=h?P(B[k],Q[k],A):B[k],E?(g.copy(v.normals[0]).multiplyScalar(J.x),x.copy(v.binormals[0]).multiplyScalar(J.y),G.copy(d[0]).add(g).add(x),Y(G.x,G.y,G.z)):Y(J.x,J.y,0);for(D=1;D<=u;D++)for(k=0;k<W;k++)J=h?P(B[k],Q[k],A):B[k],E?(g.copy(v.normals[D]).multiplyScalar(J.x),x.copy(v.binormals[D]).multiplyScalar(J.y),G.copy(d[D]).add(g).add(x),Y(G.x,G.y,G.z)):Y(J.x,J.y,i/u*D);for(U=c-1;U>=0;U--){for(I=U/c,j=f*Math.cos(I*Math.PI/2),A=l*Math.sin(I*Math.PI/2)+p,k=0,z=O.length;k<z;k++)Y((J=P(O[k],L[k],A)).x,J.y,i+j);for(b=0,V=N.length;b<V;b++)for(S=N[b],R=K[b],k=0,z=S.length;k<z;k++)J=P(S[k],R[k],A),E?Y(J.x,J.y+d[u-1].y,d[u-1].x+j):Y(J.x,J.y,i+j)}function X(e,t){var r,o;for(k=e.length;--k>=0;){r=k,(o=k-1)<0&&(o=e.length-1);var a=0,n=u+2*c;for(a=0;a<n;a++){var s=W*a,i=W*(a+1);$(t+r+s,t+o+s,t+o+i,t+r+i)}}}function Y(e,t,r){n.push(e),n.push(t),n.push(r)}function Z(e,t,a){_(e),_(t),_(a);var n=o.length/3,s=y.generateTopUV(r,o,n-3,n-2,n-1);ee(s[0]),ee(s[1]),ee(s[2])}function $(e,t,a,n){_(e),_(t),_(n),_(t),_(a),_(n);var s=o.length/3,u=y.generateSideWallUV(r,o,s-6,s-3,s-2,s-1);ee(u[0]),ee(u[1]),ee(u[3]),ee(u[1]),ee(u[2]),ee(u[3])}function _(e){o.push(n[3*e+0]),o.push(n[3*e+1]),o.push(n[3*e+2])}function ee(e){a.push(e.x),a.push(e.y)}!function(){var e=o.length/3;if(h){var t=0,a=W*t;for(k=0;k<q;k++)Z((T=M[k])[2]+a,T[1]+a,T[0]+a);for(a=W*(t=u+2*c),k=0;k<q;k++)Z((T=M[k])[0]+a,T[1]+a,T[2]+a)}else{for(k=0;k<q;k++)Z((T=M[k])[2],T[1],T[0]);for(k=0;k<q;k++)Z((T=M[k])[0]+W*u,T[1]+W*u,T[2]+W*u)}r.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;for(X(O,t),t+=O.length,b=0,V=N.length;b<V;b++)X(S=N[b],t),t+=S.length;r.addGroup(e,o.length/3-e,1)}()}this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("uv",new Float32BufferAttribute(a,2)),this.computeVertexNormals()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype),ExtrudeGeometry.prototype.constructor=ExtrudeGeometry,ExtrudeGeometry.prototype.toJSON=function(){var e=Geometry.prototype.toJSON.call(this);return toJSON(this.parameters.shapes,this.parameters.options,e)},ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry,ExtrudeBufferGeometry.prototype.toJSON=function(){var e=BufferGeometry.prototype.toJSON.call(this);return toJSON(this.parameters.shapes,this.parameters.options,e)};var WorldUVGenerator={generateTopUV:function(e,t,r,o,a){var n=t[3*r],s=t[3*r+1],u=t[3*o],i=t[3*o+1],h=t[3*a],f=t[3*a+1];return[new Vector2(n,s),new Vector2(u,i),new Vector2(h,f)]},generateSideWallUV:function(e,t,r,o,a,n){var s=t[3*r],u=t[3*r+1],i=t[3*r+2],h=t[3*o],f=t[3*o+1],l=t[3*o+2],p=t[3*a],c=t[3*a+1],m=t[3*a+2],y=t[3*n],d=t[3*n+1],v=t[3*n+2];return Math.abs(u-f)<.01?[new Vector2(s,1-i),new Vector2(h,1-l),new Vector2(p,1-m),new Vector2(y,1-v)]:[new Vector2(u,1-i),new Vector2(f,1-l),new Vector2(c,1-m),new Vector2(d,1-v)]}};function toJSON(e,t,r){if(r.shapes=[],Array.isArray(e))for(var o=0,a=e.length;o<a;o++){var n=e[o];r.shapes.push(n.uuid)}else r.shapes.push(e.uuid);return void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}export{ExtrudeGeometry,ExtrudeBufferGeometry};
//# sourceMappingURL=/sm/c33ff25617aef3258f6d5a153332e8959a0592945552d097adfb4670231d9541.map
/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/extras/curves/CatmullRomCurve3.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Vector3}from"../../math/Vector3.js";import{Curve}from"../core/Curve.js";function CubicPoly(){var t=0,o=0,e=0,i=0;function r(r,n,s,u){t=r,o=s,e=-3*r+3*n-2*s-u,i=2*r-2*n+s+u}return{initCatmullRom:function(t,o,e,i,n){r(o,e,n*(e-t),n*(i-o))},initNonuniformCatmullRom:function(t,o,e,i,n,s,u){var l=(o-t)/n-(e-t)/(n+s)+(e-o)/s,p=(e-o)/s-(i-o)/(s+u)+(i-e)/u;r(o,e,l*=s,p*=s)},calc:function(r){var n=r*r;return t+o*r+e*n+i*(n*r)}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(t,o,e,i){Curve.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=o||!1,this.curveType=e||"centripetal",this.tension=i||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype),CatmullRomCurve3.prototype.constructor=CatmullRomCurve3,CatmullRomCurve3.prototype.isCatmullRomCurve3=!0,CatmullRomCurve3.prototype.getPoint=function(t,o){var e,i,r,n,s=o||new Vector3,u=this.points,l=u.length,p=(l-(this.closed?0:1))*t,c=Math.floor(p),a=p-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===a&&c===l-1&&(c=l-2,a=1),this.closed||c>0?e=u[(c-1)%l]:(tmp.subVectors(u[0],u[1]).add(u[0]),e=tmp),i=u[c%l],r=u[(c+1)%l],this.closed||c+2<l?n=u[(c+2)%l]:(tmp.subVectors(u[l-1],u[l-2]).add(u[l-1]),n=tmp),"centripetal"===this.curveType||"chordal"===this.curveType){var m="chordal"===this.curveType?.5:.25,h=Math.pow(e.distanceToSquared(i),m),v=Math.pow(i.distanceToSquared(r),m),y=Math.pow(r.distanceToSquared(n),m);v<1e-4&&(v=1),h<1e-4&&(h=v),y<1e-4&&(y=v),px.initNonuniformCatmullRom(e.x,i.x,r.x,n.x,h,v,y),py.initNonuniformCatmullRom(e.y,i.y,r.y,n.y,h,v,y),pz.initNonuniformCatmullRom(e.z,i.z,r.z,n.z,h,v,y)}else"catmullrom"===this.curveType&&(px.initCatmullRom(e.x,i.x,r.x,n.x,this.tension),py.initCatmullRom(e.y,i.y,r.y,n.y,this.tension),pz.initCatmullRom(e.z,i.z,r.z,n.z,this.tension));return s.set(px.calc(a),py.calc(a),pz.calc(a)),s},CatmullRomCurve3.prototype.copy=function(t){Curve.prototype.copy.call(this,t),this.points=[];for(var o=0,e=t.points.length;o<e;o++){var i=t.points[o];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},CatmullRomCurve3.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);t.points=[];for(var o=0,e=this.points.length;o<e;o++){var i=this.points[o];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},CatmullRomCurve3.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this,t),this.points=[];for(var o=0,e=t.points.length;o<e;o++){var i=t.points[o];this.points.push((new Vector3).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};export{CatmullRomCurve3};
//# sourceMappingURL=/sm/27342348acbb4794e33228b5be850f474eec5f2997c1af4914382080a1146e74.map
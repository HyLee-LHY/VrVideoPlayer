/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/three@0.117.1/src/loaders/FileLoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Cache}from"./Cache.js";import{Loader}from"./Loader.js";var loading={};function FileLoader(e){Loader.call(this,e)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(e,r,t,a){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var o=this,n=Cache.get(e);if(void 0!==n)return o.manager.itemStart(e),setTimeout(function(){r&&r(n),o.manager.itemEnd(e)},0),n;if(void 0===loading[e]){var i=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(i){var s=i[1],d=!!i[2],h=i[3];h=decodeURIComponent(h),d&&(h=atob(h));try{var l,m=(this.responseType||"").toLowerCase();switch(m){case"arraybuffer":case"blob":for(var g=new Uint8Array(h.length),p=0;p<h.length;p++)g[p]=h.charCodeAt(p);l="blob"===m?new Blob([g.buffer],{type:s}):g.buffer;break;case"document":var u=new DOMParser;l=u.parseFromString(h,s);break;case"json":l=JSON.parse(h);break;default:l=h}setTimeout(function(){r&&r(l),o.manager.itemEnd(e)},0)}catch(r){setTimeout(function(){a&&a(r),o.manager.itemError(e),o.manager.itemEnd(e)},0)}}else{loading[e]=[],loading[e].push({onLoad:r,onProgress:t,onError:a});var c=new XMLHttpRequest;for(var v in c.open("GET",e,!0),c.addEventListener("load",function(r){var t=this.response,a=loading[e];if(delete loading[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(e,t);for(var n=0,i=a.length;n<i;n++){(s=a[n]).onLoad&&s.onLoad(t)}o.manager.itemEnd(e)}else{for(n=0,i=a.length;n<i;n++){var s;(s=a[n]).onError&&s.onError(r)}o.manager.itemError(e),o.manager.itemEnd(e)}},!1),c.addEventListener("progress",function(r){for(var t=loading[e],a=0,o=t.length;a<o;a++){var n=t[a];n.onProgress&&n.onProgress(r)}},!1),c.addEventListener("error",function(r){var t=loading[e];delete loading[e];for(var a=0,n=t.length;a<n;a++){var i=t[a];i.onError&&i.onError(r)}o.manager.itemError(e),o.manager.itemEnd(e)},!1),c.addEventListener("abort",function(r){var t=loading[e];delete loading[e];for(var a=0,n=t.length;a<n;a++){var i=t[a];i.onError&&i.onError(r)}o.manager.itemError(e),o.manager.itemEnd(e)},!1),void 0!==this.responseType&&(c.responseType=this.responseType),void 0!==this.withCredentials&&(c.withCredentials=this.withCredentials),c.overrideMimeType&&c.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)c.setRequestHeader(v,this.requestHeader[v]);c.send(null)}return o.manager.itemStart(e),c}loading[e].push({onLoad:r,onProgress:t,onError:a})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}});export{FileLoader};
//# sourceMappingURL=/sm/dcf6880edf437fadc699f7883915f01e9bfeada84979a6a2163b2a4ca8eceefd.map